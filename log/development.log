  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateDoctors (20231011084845)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "doctors" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "specialty" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20231011084845"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateAppointments (20231011084849)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "appointments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "patient_name" varchar, "appointment_time" datetime(6), "doctor_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_8db8e1e8a5"
FOREIGN KEY ("doctor_id")
  REFERENCES "doctors" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_appointments_on_doctor_id" ON "appointments" ("doctor_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20231011084849"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-10-11 08:49:57.596285"], ["updated_at", "2023-10-11 08:49:57.596285"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api_test.html" for ::1 at 2023-10-11 11:00:01 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/api_test.html"):
  
Started GET "/favicon.ico" for ::1 at 2023-10-11 11:00:02 +0200
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/api_test.html" for ::1 at 2023-10-11 11:00:36 +0200
  
ActionController::RoutingError (No route matches [GET] "/api_test.html"):
  
Started GET "/doctors" for ::1 at 2023-10-11 11:02:57 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DoctorsController#index as */*
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 33ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 5305)


Started GET "/posts/new" for ::1 at 2023-10-11 11:03:04 +0200
  
ActionController::RoutingError (No route matches [GET] "/posts/new"):
  
Started GET "/doctors" for ::1 at 2023-10-11 11:03:09 +0200
Processing by DoctorsController#index as HTML
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.4ms | Allocations: 794)


Started GET "/doctors" for ::1 at 2023-10-11 11:04:13 +0200
Processing by DoctorsController#index as HTML
  [1m[36mDoctor Load (0.7ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 7ms (Views: 4.2ms | ActiveRecord: 0.7ms | Allocations: 655)


Started GET "/doctors" for ::1 at 2023-10-11 11:04:14 +0200
Processing by DoctorsController#index as HTML
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.2ms | Allocations: 666)


Started GET "/doctors" for ::1 at 2023-10-11 11:04:19 +0200
Processing by DoctorsController#index as */*
  [1m[36mDoctor Load (2.8ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 10ms (Views: 6.5ms | ActiveRecord: 2.8ms | Allocations: 659)


Started GET "/doctors" for ::1 at 2023-10-11 11:04:26 +0200
Processing by DoctorsController#index as HTML
  [1m[36mDoctor Load (4.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 9ms (Views: 3.8ms | ActiveRecord: 4.3ms | Allocations: 668)


Started GET "/doctors" for ::1 at 2023-10-11 11:04:44 +0200
Processing by DoctorsController#index as HTML
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.4ms | Allocations: 667)


Started GET "/doctors" for ::1 at 2023-10-11 11:06:37 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DoctorsController#index as HTML
  [1m[36mDoctor Load (0.8ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 8ms (Views: 0.6ms | ActiveRecord: 0.8ms | Allocations: 5029)


Started GET "/doctors" for ::1 at 2023-10-11 11:06:38 +0200
Processing by DoctorsController#index as HTML
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 693)


Started GET "/doctors" for ::1 at 2023-10-11 11:06:39 +0200
Processing by DoctorsController#index as HTML
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.2ms | Allocations: 667)


Started GET "/doctors" for ::1 at 2023-10-11 11:06:43 +0200
Processing by DoctorsController#index as */*
  [1m[36mDoctor Load (1.6ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 4ms (Views: 2.4ms | ActiveRecord: 1.6ms | Allocations: 661)


  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mDoctor Create (2.2ms)[0m  [1m[32mINSERT INTO "doctors" ("name", "specialty", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Dr.smirt"], ["specialty", "ENT"], ["created_at", "2023-10-11 09:07:28.141538"], ["updated_at", "2023-10-11 09:07:28.141538"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
Started GET "/doctors" for ::1 at 2023-10-11 11:07:54 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DoctorsController#index as */*
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 10ms (Views: 3.0ms | ActiveRecord: 0.3ms | Allocations: 9158)


Started GET "/doctors" for ::1 at 2023-10-11 11:07:57 +0200
Processing by DoctorsController#index as HTML
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 2ms (Views: 1.9ms | ActiveRecord: 0.2ms | Allocations: 885)


Started GET "/doctors" for ::1 at 2023-10-11 11:08:29 +0200
Processing by DoctorsController#index as HTML
  [1m[36mDoctor Load (0.5ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 7ms (Views: 3.4ms | ActiveRecord: 0.5ms | Allocations: 785)


Started GET "/doctors" for ::1 at 2023-10-11 11:08:30 +0200
Processing by DoctorsController#index as HTML
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 1ms (Views: 1.2ms | ActiveRecord: 0.1ms | Allocations: 785)


Started GET "/doctors" for ::1 at 2023-10-11 11:09:25 +0200
Processing by DoctorsController#index as HTML
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 4ms (Views: 2.1ms | ActiveRecord: 0.6ms | Allocations: 3945)


Started GET "/doctors" for ::1 at 2023-10-11 11:09:33 +0200
Processing by DoctorsController#index as HTML
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 6ms (Views: 4.4ms | ActiveRecord: 0.3ms | Allocations: 787)


Started GET "/doctors/1" for ::1 at 2023-10-11 11:09:41 +0200
  
ActionController::RoutingError (No route matches [GET] "/doctors/1"):
  
Started GET "/doctors" for ::1 at 2023-10-11 11:10:07 +0200
Processing by DoctorsController#index as HTML
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 9ms (Views: 4.0ms | ActiveRecord: 0.3ms | Allocations: 924)


Started GET "/doctors" for ::1 at 2023-10-11 11:10:16 +0200
Processing by DoctorsController#index as HTML
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.3ms | Allocations: 771)


Started GET "/doctors" for ::1 at 2023-10-11 11:10:48 +0200
Processing by DoctorsController#index as HTML
Completed 204 No Content in 11ms (ActiveRecord: 0.0ms | Allocations: 1240)


Started GET "/doctors" for ::1 at 2023-10-11 11:10:58 +0200
Processing by DoctorsController#index as HTML
Completed 204 No Content in 2ms (ActiveRecord: 0.0ms | Allocations: 56)


Started GET "/doctors" for ::1 at 2023-10-11 11:11:10 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DoctorsController#index as HTML
Completed 204 No Content in 5ms (ActiveRecord: 0.0ms | Allocations: 4067)


Started GET "/doctors" for ::1 at 2023-10-11 11:11:14 +0200
Processing by DoctorsController#index as HTML
Completed 204 No Content in 1ms (ActiveRecord: 0.0ms | Allocations: 64)


Started GET "/doctors" for ::1 at 2023-10-11 11:11:15 +0200
Processing by DoctorsController#index as HTML
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 45)


Started GET "/doctors" for ::1 at 2023-10-11 11:12:37 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DoctorsController#index as */*
Completed 204 No Content in 4ms (ActiveRecord: 0.0ms | Allocations: 4069)


Started GET "/doctors" for ::1 at 2023-10-11 11:12:42 +0200
Processing by DoctorsController#index as HTML
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 66)


Started GET "/doctors" for ::1 at 2023-10-11 11:12:43 +0200
Processing by DoctorsController#index as HTML
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 45)


Started GET "/doctors" for ::1 at 2023-10-11 11:12:58 +0200
Processing by DoctorsController#index as HTML
Completed 204 No Content in 1ms (ActiveRecord: 0.0ms | Allocations: 40)


Started GET "/doctors" for ::1 at 2023-10-11 11:13:29 +0200
Processing by DoctorsController#index as HTML
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms | Allocations: 3463)


  
NoMethodError (undefined method `respond_to' for #<DoctorsController:0x0000000000c2d8>

    respond_to( @doctors)
    ^^^^^^^^^^
Did you mean?  respond_to?):
  
app/controllers/doctors_controller.rb:7:in `index'
Started GET "/doctors" for ::1 at 2023-10-11 11:13:36 +0200
Processing by DoctorsController#index as HTML
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
  â†³ app/controllers/doctors_controller.rb:7:in `respond_to?'
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.3ms | Allocations: 6446)


  
TypeError (#<ActiveRecord::Relation [#<Doctor id: 1, name: "Dr.smirt", specialty: "ENT", created_at: "2023-10-11 09:07:28.141538000 +0000", updated_at: "2023-10-11 09:07:28.141538000 +0000">]> is not a symbol nor a string):
  
app/controllers/doctors_controller.rb:7:in `respond_to?'
app/controllers/doctors_controller.rb:7:in `index'
Started GET "/doctors" for ::1 at 2023-10-11 11:14:13 +0200
Processing by DoctorsController#index as HTML
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms | Allocations: 3398)


  
NoMethodError (undefined method `respond_to' for #<DoctorsController:0x00000000013970>

    respond_to do |format|
    ^^^^^^^^^^
Did you mean?  respond_to?):
  
app/controllers/doctors_controller.rb:8:in `index'
Started GET "/doctors" for ::1 at 2023-10-11 11:14:45 +0200
Processing by DoctorsController#index as HTML
  [1m[36mDoctor Load (0.9ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 13ms (Views: 7.3ms | ActiveRecord: 2.6ms | Allocations: 4092)


Started GET "/doctors" for ::1 at 2023-10-11 11:15:58 +0200
Processing by DoctorsController#index as HTML
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms | Allocations: 3389)


  
NoMethodError (undefined method `respond_to' for #<DoctorsController:0x0000000001ad60>

    respond_to do |format|
    ^^^^^^^^^^
Did you mean?  respond_to?):
  
app/controllers/doctors_controller.rb:8:in `index'
Started GET "/doctors" for ::1 at 2023-10-11 11:16:25 +0200
Processing by DoctorsController#index as HTML
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 1317)


Started GET "/doctors" for ::1 at 2023-10-11 11:16:27 +0200
Processing by DoctorsController#index as HTML
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 88)


Started GET "/doctors" for ::1 at 2023-10-11 11:16:32 +0200
Processing by DoctorsController#index as HTML
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 72)


Started GET "/doctors" for ::1 at 2023-10-11 11:16:34 +0200
Processing by DoctorsController#index as */*
Completed 204 No Content in 2ms (ActiveRecord: 0.0ms | Allocations: 57)


Started GET "/doctors" for ::1 at 2023-10-11 11:17:09 +0200
Processing by DoctorsController#index as HTML
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 1296)


Started GET "/doctors" for ::1 at 2023-10-11 11:17:11 +0200
Processing by DoctorsController#index as HTML
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 88)


Started GET "/doctors" for ::1 at 2023-10-11 11:17:17 +0200
Processing by DoctorsController#index as */*
Completed 204 No Content in 1ms (ActiveRecord: 0.0ms | Allocations: 55)


Started GET "/doctors" for ::1 at 2023-10-11 11:17:54 +0200
Processing by DoctorsController#index as HTML
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 124)


Started GET "/doctors" for ::1 at 2023-10-11 11:17:56 +0200
Processing by DoctorsController#index as HTML
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 30)


Started GET "/doctors" for ::1 at 2023-10-11 11:18:20 +0200
Processing by DoctorsController#index as HTML
Completed 204 No Content in 1ms (ActiveRecord: 0.0ms | Allocations: 124)


Started GET "/doctors" for ::1 at 2023-10-11 11:18:37 +0200
Processing by DoctorsController#index as HTML
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 30)


Started GET "/doctors" for ::1 at 2023-10-11 11:20:41 +0200
Processing by DoctorsController#index as HTML
Completed 204 No Content in 1ms (ActiveRecord: 0.0ms | Allocations: 124)


Started GET "/doctors" for ::1 at 2023-10-11 11:20:43 +0200
Processing by DoctorsController#index as HTML
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 30)


Started GET "/doctors" for ::1 at 2023-10-11 11:20:43 +0200
Processing by DoctorsController#index as HTML
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 30)


Started GET "/appointments" for ::1 at 2023-10-11 11:22:35 +0200
Processing by AppointmentsController#index as HTML
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 124)


Started GET "/appointments" for ::1 at 2023-10-11 11:22:37 +0200
Processing by AppointmentsController#index as HTML
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 30)


Started GET "/appointments" for ::1 at 2023-10-11 11:23:00 +0200
Processing by AppointmentsController#index as */*
Completed 204 No Content in 1ms (ActiveRecord: 0.0ms | Allocations: 32)


Started GET "/appointments" for ::1 at 2023-10-11 11:23:06 +0200
Processing by AppointmentsController#index as HTML
Completed 204 No Content in 1ms (ActiveRecord: 0.0ms | Allocations: 30)


Started GET "/appointments" for ::1 at 2023-10-11 11:23:10 +0200
Processing by AppointmentsController#index as HTML
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 30)


Started GET "/appointments" for ::1 at 2023-10-11 11:23:10 +0200
Processing by AppointmentsController#index as HTML
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 30)


Started GET "/hi" for ::1 at 2023-10-11 11:23:40 +0200
  
ActionController::RoutingError (No route matches [GET] "/hi"):
  
Started GET "/hi" for ::1 at 2023-10-11 11:23:59 +0200
  
ActionController::RoutingError (No route matches [GET] "/hi"):
  
Started GET "/hi" for ::1 at 2023-10-11 11:24:24 +0200
  
ArgumentError (can't use collection outside resource(s) scope):
  
config/routes.rb:7:in `block (3 levels) in <main>'
config/routes.rb:6:in `block (2 levels) in <main>'
config/routes.rb:5:in `block in <main>'
config/routes.rb:1:in `<main>'
Started GET "/hi" for ::1 at 2023-10-11 11:24:56 +0200
  
ActionController::RoutingError (No route matches [GET] "/hi"):
  
Started GET "/appointments" for ::1 at 2023-10-11 11:25:11 +0200
  
AbstractController::ActionNotFound (The action 'index' could not be found for AppointmentsController):
  
actionpack (7.0.8) lib/abstract_controller/base.rb:146:in `process'
actionpack (7.0.8) lib/action_controller/metal.rb:188:in `dispatch'
actionpack (7.0.8) lib/action_controller/metal.rb:251:in `dispatch'
actionpack (7.0.8) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.0.8) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.0.8) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.0.8) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.8) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.8) lib/action_dispatch/routing/route_set.rb:852:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (7.0.8) lib/active_record/migration.rb:638:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.8) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.8) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.8) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
railties (7.0.8) lib/rails/engine.rb:530:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/appointments/hi" for ::1 at 2023-10-11 11:25:13 +0200
Processing by AppointmentsController#hi as HTML
Completed 204 No Content in 1ms (ActiveRecord: 0.0ms | Allocations: 108)


Started GET "/doctors" for ::1 at 2023-10-11 11:36:38 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DoctorsController#index as */*
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  â†³ app/controllers/doctors_controller.rb:7:in `index'
Completed 200 OK in 8ms (Views: 3.2ms | ActiveRecord: 0.4ms | Allocations: 9158)


Started GET "/working_hours" for ::1 at 2023-10-11 11:36:53 +0200
  
ActionController::RoutingError (No route matches [GET] "/working_hours"):
  
Started GET "/working_hours" for ::1 at 2023-10-11 11:37:09 +0200
  
ActionController::RoutingError (No route matches [GET] "/working_hours"):
  
Started GET "/1/working_hours" for ::1 at 2023-10-11 11:38:21 +0200
  
ActionController::RoutingError (No route matches [GET] "/1/working_hours"):
  
Started GET "/1/working_hours" for ::1 at 2023-10-11 11:38:44 +0200
  
ActionController::RoutingError (No route matches [GET] "/1/working_hours"):
  
Started GET "/doctors/:id/working_hours" for ::1 at 2023-10-11 11:39:00 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>":id"}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", nil], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:39:in `set_doctor'
Completed 404 Not Found in 29ms (ActiveRecord: 2.7ms | Allocations: 3276)


  
ActiveRecord::RecordNotFound (Couldn't find Doctor with 'id'=:id):
  
app/controllers/doctors_controller.rb:39:in `set_doctor'
Started GET "/doctors/1/working_hours" for ::1 at 2023-10-11 11:39:07 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.8ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:39:in `set_doctor'
Completed 500 Internal Server Error in 35ms (ActiveRecord: 0.8ms | Allocations: 6010)


  
NoMethodError (undefined method `working_hours' for #<Doctor id: 1, name: "Dr.smirt", specialty: "ENT", created_at: "2023-10-11 09:07:28.141538000 +0000", updated_at: "2023-10-11 09:07:28.141538000 +0000">):
  
app/controllers/doctors_controller.rb:12:in `working_hours'
Started GET "/doctors/1/working_hours" for ::1 at 2023-10-11 11:40:27 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:39:in `set_doctor'
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.8ms | Allocations: 10287)


  
NameError (Rails couldn't find a valid model for Availability association. Please provide the :class_name option on the association declaration. If :class_name is already provided, make sure it's an ActiveRecord::Base subclass.

          raise NameError, msg
          ^^^^^):
  
app/models/doctor.rb:7:in `working_hours'
app/controllers/doctors_controller.rb:12:in `working_hours'
Started GET "/doctors/1/working_hours" for ::1 at 2023-10-11 11:41:09 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mCACHE ActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate RAILS_ENV=development

You have 1 pending migration:

20231011094050_create_availabilities.rb


):
  
activerecord (7.0.8) lib/active_record/migration.rb:662:in `check_pending!'
activerecord (7.0.8) lib/active_record/migration.rb:627:in `block (2 levels) in call'
activesupport (7.0.8) lib/active_support/file_update_checker.rb:83:in `execute'
activerecord (7.0.8) lib/active_record/migration.rb:632:in `block in call'
activerecord (7.0.8) lib/active_record/migration.rb:624:in `synchronize'
activerecord (7.0.8) lib/active_record/migration.rb:624:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.8) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.8) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.8) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
railties (7.0.8) lib/rails/engine.rb:530:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateAvailabilities (20231011094050)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "availabilities" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "start_time" datetime(6), "end_time" datetime(6), "doctor_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_b9830dab2f"
FOREIGN KEY ("doctor_id")
  REFERENCES "doctors" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_availabilities_on_doctor_id" ON "availabilities" ("doctor_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20231011094050"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/doctors/1/working_hours" for ::1 at 2023-10-11 11:41:21 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:39:in `set_doctor'
  [1m[36mAvailability Load (0.0ms)[0m  [1m[34mSELECT "availabilities".* FROM "availabilities" WHERE "availabilities"."doctor_id" = ?[0m  [["doctor_id", 1]]
  â†³ app/models/doctor.rb:7:in `map'
Completed 200 OK in 22ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 14494)


Started GET "/doctors/1/working_hours" for ::1 at 2023-10-11 11:41:21 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:39:in `set_doctor'
  [1m[36mAvailability Load (0.1ms)[0m  [1m[34mSELECT "availabilities".* FROM "availabilities" WHERE "availabilities"."doctor_id" = ?[0m  [["doctor_id", 1]]
  â†³ app/models/doctor.rb:7:in `map'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 1201)


Started GET "/doctors/1/availability" for ::1 at 2023-10-11 11:41:43 +0200
Processing by DoctorsController#availability as */*
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:39:in `set_doctor'
Completed 500 Internal Server Error in 35ms (ActiveRecord: 0.4ms | Allocations: 5045)


  
NoMethodError (undefined method `availability' for #<Doctor id: 1, name: "Dr.smirt", specialty: "ENT", created_at: "2023-10-11 09:07:28.141538000 +0000", updated_at: "2023-10-11 09:07:28.141538000 +0000">
Did you mean?  availabilities):
  
app/controllers/doctors_controller.rb:18:in `availability'
Started GET "/doctors/1/availability" for ::1 at 2023-10-11 11:42:36 +0200
Processing by DoctorsController#availability as */*
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.5ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mAvailability Load (0.2ms)[0m  [1m[34mSELECT "availabilities".* FROM "availabilities" WHERE "availabilities"."doctor_id" = ?[0m  [["doctor_id", 1]]
  â†³ app/controllers/doctors_controller.rb:19:in `availability'
Completed 200 OK in 16ms (Views: 6.2ms | ActiveRecord: 1.3ms | Allocations: 6590)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:42:52 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
  [1m[36mAppointment Create (0.8ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", nil], ["appointment_time", nil], ["doctor_id", 1], ["created_at", "2023-10-11 09:42:53.020874"], ["updated_at", "2023-10-11 09:42:53.020874"]]
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 201 Created in 39ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 8072)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:43:31 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"12pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
  [1m[36mAppointment Create (0.4ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 12:00:00"], ["doctor_id", 1], ["created_at", "2023-10-11 09:43:31.830251"], ["updated_at", "2023-10-11 09:43:31.830251"]]
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 201 Created in 20ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 2609)


  [1m[36mAppointment Load (0.4ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:45:52 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"12pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 12:00:00' AND appointment_time <= '2023-10-11 23:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 422 Unprocessable Entity in 12ms (Views: 0.1ms | ActiveRecord: 1.0ms | Allocations: 8489)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:46:35 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"11pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 23:00:00' AND appointment_time <= '2023-10-11 23:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Create (0.2ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 23:00:00"], ["doctor_id", 1], ["created_at", "2023-10-11 09:46:35.747629"], ["updated_at", "2023-10-11 09:46:35.747629"]]
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 201 Created in 15ms (Views: 0.1ms | ActiveRecord: 4.0ms | Allocations: 8025)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:48:44 +0200
  
SyntaxError (/Users/enercentadmin/Desktop/doctor_scheduling_system/app/controllers/doctors_controller.rb:44: syntax error, unexpected end-of-input, expecting `end'):
  
app/controllers/doctors_controller.rb:44: syntax error, unexpected end-of-input, expecting `end'
app/controllers/doctors_controller.rb:44: syntax error, unexpected end-of-input, expecting `end'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:48:50 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"11pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:44:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 23:00:00' AND appointment_time <= '2023-10-11 23:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 204 No Content in 14ms (ActiveRecord: 1.2ms | Allocations: 7212)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:48:57 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"1pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:44:in `set_doctor'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 13:00:00' AND appointment_time <= '2023-10-11 23:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 204 No Content in 15ms (ActiveRecord: 1.2ms | Allocations: 2410)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:50:09 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"1pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (1.6ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 13:00:00' AND appointment_time <= '2023-10-11 23:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 500 Internal Server Error in 24ms (ActiveRecord: 2.4ms | Allocations: 11496)


  
NoMethodError (undefined method `Doctor already has an appointment at this time' for #<Appointment id: nil, patient_name: "nishi", appointment_time: "2023-10-11 13:00:00.000000000 +0000", doctor_id: 1, created_at: nil, updated_at: nil>):
  
app/controllers/doctors_controller.rb:33:in `book_slot'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:50:23 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"1pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 13:00:00' AND appointment_time <= '2023-10-11 23:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 500 Internal Server Error in 39ms (ActiveRecord: 3.3ms | Allocations: 11558)


  
NoMethodError (undefined method `Doctor already has an appointment at this time' for #<Appointment id: nil, patient_name: "nishi", appointment_time: "2023-10-11 13:00:00.000000000 +0000", doctor_id: 1, created_at: nil, updated_at: nil>):
  
app/controllers/doctors_controller.rb:33:in `book_slot'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:50:40 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"1pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 13:00:00' AND appointment_time <= '2023-10-11 23:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 12.2ms | Allocations: 7354)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:51:32 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"1pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (4.5ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 13:00:00' AND appointment_time <= '2023-10-11 23:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 500 Internal Server Error in 45ms (ActiveRecord: 10.5ms | Allocations: 11497)


  
NoMethodError (undefined method `Doctor already has an appointment at this time' for #<Appointment id: nil, patient_name: "nishi", appointment_time: "2023-10-11 13:00:00.000000000 +0000", doctor_id: 1, created_at: nil, updated_at: nil>):
  
app/controllers/doctors_controller.rb:33:in `book_slot'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:51:46 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"1pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (1.7ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 13:00:00' AND appointment_time <= '2023-10-11 23:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 500 Internal Server Error in 56ms (ActiveRecord: 4.2ms | Allocations: 11550)


  
NoMethodError (undefined method `Doctor already has an appointment at this time' for #<Appointment id: nil, patient_name: "nishi", appointment_time: "2023-10-11 13:00:00.000000000 +0000", doctor_id: 1, created_at: nil, updated_at: nil>):
  
app/controllers/doctors_controller.rb:33:in `book_slot'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:52:20 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"1pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:41:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 13:00:00' AND appointment_time <= '2023-10-11 23:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 204 No Content in 8ms (ActiveRecord: 1.0ms | Allocations: 7202)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:52:38 +0200
  
SyntaxError (/Users/enercentadmin/Desktop/doctor_scheduling_system/app/controllers/doctors_controller.rb:31: syntax error, unexpected label, expecting `do' or '{' or '('
...er json: { appointment message: 'Appointment booked successf...
...                       ^~~~~~~~
/Users/enercentadmin/Desktop/doctor_scheduling_system/app/controllers/doctors_controller.rb:31: syntax error, unexpected '}', expecting `end'
...ointment booked successfully' }, status: :created
...                              ^
):
  
app/controllers/doctors_controller.rb:31: syntax error, unexpected label, expecting `do' or '{' or '('
app/controllers/doctors_controller.rb:31: syntax error, unexpected '}', expecting `end'
app/controllers/doctors_controller.rb:31: syntax error, unexpected label, expecting `do' or '{' or '('
app/controllers/doctors_controller.rb:31: syntax error, unexpected '}', expecting `end'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:52:43 +0200
  
SyntaxError (/Users/enercentadmin/Desktop/doctor_scheduling_system/app/controllers/doctors_controller.rb:31: syntax error, unexpected ',', expecting =>
...    render json: { appointment, message: 'Appointment booked...
...                              ^
/Users/enercentadmin/Desktop/doctor_scheduling_system/app/controllers/doctors_controller.rb:31: syntax error, unexpected '}', expecting `end'
...ointment booked successfully' }, status: :created
...                              ^
):
  
app/controllers/doctors_controller.rb:31: syntax error, unexpected ',', expecting =>
app/controllers/doctors_controller.rb:31: syntax error, unexpected '}', expecting `end'
app/controllers/doctors_controller.rb:31: syntax error, unexpected ',', expecting =>
app/controllers/doctors_controller.rb:31: syntax error, unexpected '}', expecting `end'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:53:54 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"1pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 13:00:00' AND appointment_time <= '2023-10-11 23:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 500 Internal Server Error in 28ms (ActiveRecord: 2.4ms | Allocations: 11553)


  
NoMethodError (undefined method `Doctor already has an appointment at this time' for #<Appointment id: nil, patient_name: "nishi", appointment_time: "2023-10-11 13:00:00.000000000 +0000", doctor_id: 1, created_at: nil, updated_at: nil>):
  
app/controllers/doctors_controller.rb:33:in `book_slot'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:54:04 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"1pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 13:00:00' AND appointment_time <= '2023-10-11 23:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 500 Internal Server Error in 24ms (ActiveRecord: 1.0ms | Allocations: 11511)


  
NoMethodError (undefined method `Doctor already has an appointment at this time' for #<Appointment id: nil, patient_name: "nishi", appointment_time: "2023-10-11 13:00:00.000000000 +0000", doctor_id: 1, created_at: nil, updated_at: nil>):
  
app/controllers/doctors_controller.rb:33:in `book_slot'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:54:22 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"1pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 13:00:00' AND appointment_time <= '2023-10-11 23:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 500 Internal Server Error in 27ms (ActiveRecord: 1.5ms | Allocations: 11488)


  
NoMethodError (undefined method `Doctor already has an appointment at this time' for #<Appointment id: nil, patient_name: "nishi", appointment_time: "2023-10-11 13:00:00.000000000 +0000", doctor_id: 1, created_at: nil, updated_at: nil>):
  
app/controllers/doctors_controller.rb:33:in `book_slot'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:54:34 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"1pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 13:00:00' AND appointment_time <= '2023-10-11 23:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 500 Internal Server Error in 22ms (ActiveRecord: 1.6ms | Allocations: 11550)


  
NoMethodError (undefined method `Doctor already has an appointment at this time' for #<Appointment id: nil, patient_name: "nishi", appointment_time: "2023-10-11 13:00:00.000000000 +0000", doctor_id: 1, created_at: nil, updated_at: nil>):
  
app/controllers/doctors_controller.rb:33:in `book_slot'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:55:49 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"1pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 13:00:00' AND appointment_time <= '2023-10-11 13:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Create (0.7ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 13:00:00"], ["doctor_id", 1], ["created_at", "2023-10-11 09:55:49.951048"], ["updated_at", "2023-10-11 09:55:49.951048"]]
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 201 Created in 12ms (Views: 0.5ms | ActiveRecord: 2.1ms | Allocations: 8033)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:56:17 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"1pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (1.8ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 13:00:00' AND appointment_time <= '2023-10-11 13:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 422 Unprocessable Entity in 49ms (Views: 0.1ms | ActiveRecord: 2.7ms | Allocations: 7502)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:56:22 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"19pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 19:00:00' AND appointment_time <= '2023-10-11 19:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Create (0.9ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 19:00:00"], ["doctor_id", 1], ["created_at", "2023-10-11 09:56:22.517311"], ["updated_at", "2023-10-11 09:56:22.517311"]]
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 201 Created in 13ms (Views: 0.4ms | ActiveRecord: 1.9ms | Allocations: 3243)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:58:51 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"19pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:46:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 19:00:00' AND appointment_time <= '2023-10-11 19:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 200 OK in 24ms (Views: 0.5ms | ActiveRecord: 1.6ms | Allocations: 7416)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:59:15 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"19pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:46:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 19:00:00' AND appointment_time <= '2023-10-11 19:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 200 OK in 49ms (Views: 0.6ms | ActiveRecord: 2.7ms | Allocations: 7354)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:59:20 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"0pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.5ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:46:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 12:00:00' AND appointment_time <= '2023-10-11 12:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 2488)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:59:24 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"10pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:46:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 22:00:00' AND appointment_time <= '2023-10-11 22:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Create (1.6ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 22:00:00"], ["doctor_id", 1], ["created_at", "2023-10-11 09:59:24.727456"], ["updated_at", "2023-10-11 09:59:24.727456"]]
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 200 OK in 19ms (Views: 1.2ms | ActiveRecord: 2.8ms | Allocations: 3211)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 11:59:55 +0200
  
SyntaxError (/Users/enercentadmin/Desktop/doctor_scheduling_system/app/controllers/doctors_controller.rb:48: unterminated string meets end of file
/Users/enercentadmin/Desktop/doctor_scheduling_system/app/controllers/doctors_controller.rb:48: syntax error, unexpected end-of-input, expecting '}'):
  
app/controllers/doctors_controller.rb:48: unterminated string meets end of file
app/controllers/doctors_controller.rb:48: syntax error, unexpected end-of-input, expecting '}'
app/controllers/doctors_controller.rb:48: unterminated string meets end of file
app/controllers/doctors_controller.rb:48: syntax error, unexpected end-of-input, expecting '}'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:00:03 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"11pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:46:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 23:00:00' AND appointment_time <= '2023-10-11 23:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 200 OK in 24ms (Views: 0.2ms | ActiveRecord: 6.8ms | Allocations: 7416)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:00:10 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"3pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.6ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:46:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 15:00:00' AND appointment_time <= '2023-10-11 15:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Create (0.9ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 15:00:00"], ["doctor_id", 1], ["created_at", "2023-10-11 10:00:10.510463"], ["updated_at", "2023-10-11 10:00:10.510463"]]
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 500 Internal Server Error in 34ms (ActiveRecord: 2.5ms | Allocations: 5526)


  
NameError (undefined local variable or method `sucessfully' for #<DoctorsController:0x0000000005d070>

      render_success_response({appointment: appointment}, "#{appointment booked sucessfully}")
                                                                                ^^^^^^^^^^^):
  
app/controllers/doctors_controller.rb:31:in `book_slot'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:00:24 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"3pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (3.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:46:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 15:00:00' AND appointment_time <= '2023-10-11 15:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 200 OK in 17ms (Views: 0.1ms | ActiveRecord: 10.5ms | Allocations: 7380)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:00:42 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"3pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
Completed 500 Internal Server Error in 24ms (ActiveRecord: 1.8ms | Allocations: 9746)


  
NoMethodError (undefined method `create!' for #<Appointment id: nil, patient_name: "nishi", appointment_time: "2023-10-11 15:00:00.000000000 +0000", doctor_id: 1, created_at: nil, updated_at: nil>
Did you mean?  created_at):
  
app/controllers/doctors_controller.rb:30:in `book_slot'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:00:53 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"3pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (2.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 15:00:00' AND appointment_time <= '2023-10-11 15:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 422 Unprocessable Entity in 28ms (ActiveRecord: 5.2ms | Allocations: 7478)


  
ActiveRecord::RecordInvalid (Validation failed: Appointment time Doctor already has an appointment at this time):
  
app/controllers/doctors_controller.rb:30:in `book_slot'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:01:03 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"3pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.7ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 15:00:00' AND appointment_time <= '2023-10-11 15:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 422 Unprocessable Entity in 10ms (ActiveRecord: 9.2ms | Allocations: 7390)


  
ActiveRecord::RecordInvalid (Validation failed: Appointment time Doctor already has an appointment at this time):
  
app/controllers/doctors_controller.rb:30:in `book_slot'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:01:12 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"3pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (1.6ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 15:00:00' AND appointment_time <= '2023-10-11 15:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 422 Unprocessable Entity in 11ms (ActiveRecord: 2.3ms | Allocations: 7452)


  
ActiveRecord::RecordInvalid (Validation failed: Appointment time Doctor already has an appointment at this time):
  
app/controllers/doctors_controller.rb:30:in `book_slot'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:01:26 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"3pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (1.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 15:00:00' AND appointment_time <= '2023-10-11 15:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 422 Unprocessable Entity in 18ms (ActiveRecord: 6.2ms | Allocations: 7411)


  
ActiveRecord::RecordInvalid (Validation failed: Appointment time Doctor already has an appointment at this time):
  
app/controllers/doctors_controller.rb:30:in `book_slot'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:02:12 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"3pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:42:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 15:00:00' AND appointment_time <= '2023-10-11 15:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:31:in `book_slot'
  [1m[36mAppointment Load (0.1ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."doctor_id" = ? AND "appointments"."appointment_time" = ? ORDER BY "appointments"."id" ASC LIMIT ?[0m  [["doctor_id", 1], ["appointment_time", nil], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:34:in `book_slot'
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 2.3ms | Allocations: 8168)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:02:34 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"3pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:42:in `set_doctor'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 15:00:00' AND appointment_time <= '2023-10-11 15:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:31:in `book_slot'
  [1m[36mAppointment Load (1.7ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."doctor_id" = ? AND "appointments"."appointment_time" = ? ORDER BY "appointments"."id" ASC LIMIT ?[0m  [["doctor_id", 1], ["appointment_time", nil], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:34:in `book_slot'
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 7.1ms | Allocations: 8134)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:02:52 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"3pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:42:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 15:00:00' AND appointment_time <= '2023-10-11 15:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:31:in `book_slot'
  [1m[36mAppointment Load (0.1ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."doctor_id" = ? AND "appointments"."appointment_time" = ? ORDER BY "appointments"."id" ASC LIMIT ?[0m  [["doctor_id", 1], ["appointment_time", nil], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:34:in `book_slot'
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 1.9ms | Allocations: 8147)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:03:24 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"3pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 15:00:00' AND appointment_time <= '2023-10-11 15:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 422 Unprocessable Entity in 22ms (Views: 0.2ms | ActiveRecord: 3.3ms | Allocations: 7503)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:03:35 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"3pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 15:00:00' AND appointment_time <= '2023-10-11 15:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 500 Internal Server Error in 38ms (ActiveRecord: 1.3ms | Allocations: 11551)


  
NoMethodError (undefined method `Doctor already has an appointment at this time' for #<Appointment id: nil, patient_name: "nishi", appointment_time: "2023-10-11 15:00:00.000000000 +0000", doctor_id: 1, created_at: nil, updated_at: nil>):
  
app/controllers/doctors_controller.rb:33:in `book_slot'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:03:41 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"3pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 15:00:00' AND appointment_time <= '2023-10-11 15:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 422 Unprocessable Entity in 55ms (Views: 0.2ms | ActiveRecord: 4.1ms | Allocations: 7574)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:04:07 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"3pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 15:00:00' AND appointment_time <= '2023-10-11 15:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 422 Unprocessable Entity in 11ms (Views: 0.1ms | ActiveRecord: 2.3ms | Allocations: 7558)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:04:21 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"3pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 15:00:00' AND appointment_time <= '2023-10-11 15:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 422 Unprocessable Entity in 20ms (Views: 0.1ms | ActiveRecord: 3.2ms | Allocations: 7557)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:04:29 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"2pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 14:00:00' AND appointment_time <= '2023-10-11 14:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Create (0.5ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 14:00:00"], ["doctor_id", 1], ["created_at", "2023-10-11 10:04:29.697243"], ["updated_at", "2023-10-11 10:04:29.697243"]]
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
Completed 201 Created in 10ms (Views: 0.3ms | ActiveRecord: 1.5ms | Allocations: 3130)


  [1m[36mAppointment Load (4.1ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
Started GET "/appointments/1" for ::1 at 2023-10-11 12:05:33 +0200
  
ActionController::RoutingError (No route matches [GET] "/appointments/1"):
  
Started PUT "/appointments/1" for ::1 at 2023-10-11 12:05:56 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"12pm", "id"=>"1", "appointment"=>{"appointment_time"=>"12pm"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:25:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 12:00:00' AND appointment_time <= '2023-10-11 12:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
Completed 422 Unprocessable Entity in 12ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 4461)


Started PUT "/appointments/1" for ::1 at 2023-10-11 12:06:04 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"1", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.1ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:25:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Update (1.0ms)[0m  [1m[33mUPDATE "appointments" SET "appointment_time" = ?, "updated_at" = ? WHERE "appointments"."id" = ?[0m  [["appointment_time", "2023-10-11 16:00:00"], ["updated_at", "2023-10-11 10:06:04.428877"], ["id", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 4.2ms | Allocations: 4133)


Started DELETE "/appointments/1" for ::1 at 2023-10-11 12:07:30 +0200
Processing by AppointmentsController#destroy as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"1", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.4ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:25:in `set_appointment'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:15:in `destroy'
  [1m[36mAppointment Destroy (0.4ms)[0m  [1m[31mDELETE FROM "appointments" WHERE "appointments"."id" = ?[0m  [["id", 1]]
  â†³ app/controllers/appointments_controller.rb:15:in `destroy'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:15:in `destroy'
Completed 200 OK in 16ms (Views: 0.3ms | ActiveRecord: 1.9ms | Allocations: 2032)


  [1m[36mAppointment Load (1.1ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
Started PUT "/appointments/2" for ::1 at 2023-10-11 12:08:19 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:25:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Update (0.3ms)[0m  [1m[33mUPDATE "appointments" SET "appointment_time" = ?, "updated_at" = ? WHERE "appointments"."id" = ?[0m  [["appointment_time", "2023-10-11 16:00:00"], ["updated_at", "2023-10-11 10:08:19.236325"], ["id", 2]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 2.0ms | Allocations: 9656)


Started PUT "/appointments/2" for ::1 at 2023-10-11 12:11:15 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:28:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
Completed 500 Internal Server Error in 29ms (ActiveRecord: 1.0ms | Allocations: 19775)


  
NameError (undefined local variable or method `single_serializer' for #<AppointmentsController:0x00000000008c28>

                                error_codes: single_serializer.new(error_code, serializer: AppointmentSerializer)
                                             ^^^^^^^^^^^^^^^^^):
  
app/controllers/appointments_controller.rb:8:in `update'
Started PUT "/appointments/2" for ::1 at 2023-10-11 12:12:03 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:38:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
Completed 500 Internal Server Error in 20ms (ActiveRecord: 1.4ms | Allocations: 10961)


  
NameError (undefined local variable or method `single_serializer' for #<AppointmentsController:0x0000000000c5f8>

                                error_codes: single_serializer.new(error_code, serializer: AppointmentSerializer)
                                             ^^^^^^^^^^^^^^^^^):
  
app/controllers/appointments_controller.rb:19:in `update'
Started PUT "/appointments/2" for ::1 at 2023-10-11 12:13:38 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.4ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:38:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
Completed 500 Internal Server Error in 32ms (ActiveRecord: 2.1ms | Allocations: 10932)


  
NameError (undefined local variable or method `single_serializer' for #<AppointmentsController:0x0000000000fff0>

                                appoitment: single_serializer.new(appoitment, serializer: AppointmentSerializer)
                                            ^^^^^^^^^^^^^^^^^):
  
app/controllers/appointments_controller.rb:19:in `update'
Started PUT "/appointments/2" for ::1 at 2023-10-11 12:14:31 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:38:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
Completed 500 Internal Server Error in 23ms (ActiveRecord: 2.4ms | Allocations: 11476)


  
NoMethodError (undefined method `json_response' for #<AppointmentsController:0x00000000013a10>

    json_response({ success: true, message: message, data: resources}, status)
    ^^^^^^^^^^^^^):
  
app/controllers/application_controller.rb:4:in `render_success_response'
app/controllers/appointments_controller.rb:18:in `update'
Started PUT "/appointments/2" for ::1 at 2023-10-11 12:15:02 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:38:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
Completed 500 Internal Server Error in 17ms (ActiveRecord: 1.4ms | Allocations: 10931)


  
NameError (undefined local variable or method `single_serializer' for #<AppointmentsController:0x00000000017458>

                                appoitment: single_serializer.new(appoitment, serializer: AppointmentSerializer)
                                            ^^^^^^^^^^^^^^^^^):
  
app/controllers/appointments_controller.rb:19:in `update'
Started PUT "/appointments/2" for ::1 at 2023-10-11 12:15:39 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.4ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:38:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
Completed 500 Internal Server Error in 33ms (ActiveRecord: 2.2ms | Allocations: 11031)


  
NameError (undefined local variable or method `appoitment' for #<AppointmentsController:0x0000000001aea0>

                                appoitment: single_serializer.new(appoitment, serializer: AppointmentSerializer)
                                                                  ^^^^^^^^^^
Did you mean?  @appointment):
  
app/controllers/appointments_controller.rb:19:in `update'
Started PUT "/appointments/2" for ::1 at 2023-10-11 12:15:56 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:38:in `set_appointment'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
Completed 500 Internal Server Error in 19ms (ActiveRecord: 3.1ms | Allocations: 10979)


  
NoMethodError (undefined method `json_response' for #<AppointmentsController:0x0000000001e910>

    json_response({ success: true, message: message, data: resources}, status)
    ^^^^^^^^^^^^^):
  
app/controllers/application_controller.rb:4:in `render_success_response'
app/controllers/appointments_controller.rb:18:in `update'
Started PUT "/appointments/2" for ::1 at 2023-10-11 12:16:44 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.7ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:38:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
Completed 500 Internal Server Error in 51ms (ActiveRecord: 4.9ms | Allocations: 10915)


  
NameError (uninitialized constant ApplicationController::JsonResponse

    render json: JsonResponse.new(options), status: status
                 ^^^^^^^^^^^^):
  
app/controllers/application_controller.rb:16:in `json_response'
app/controllers/application_controller.rb:4:in `render_success_response'
app/controllers/appointments_controller.rb:18:in `update'
Started PUT "/appointments/2" for ::1 at 2023-10-11 12:18:29 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.4ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:38:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
Completed 500 Internal Server Error in 20ms (ActiveRecord: 1.7ms | Allocations: 10920)


  
NameError (uninitialized constant ApplicationController::JsonResponse

    render json: JsonResponse.new(options), status: status
                 ^^^^^^^^^^^^):
  
app/controllers/application_controller.rb:16:in `json_response'
app/controllers/application_controller.rb:4:in `render_success_response'
app/controllers/appointments_controller.rb:18:in `update'
Started PUT "/appointments/2" for ::1 at 2023-10-11 12:19:08 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:38:in `set_appointment'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.5ms | Allocations: 5578)


  
NameError (uninitialized constant ApplicationController::JsonResponse

    render json: JsonResponse.new(options), status: status
                 ^^^^^^^^^^^^):
  
app/controllers/application_controller.rb:16:in `json_response'
app/controllers/application_controller.rb:4:in `render_success_response'
app/controllers/appointments_controller.rb:18:in `update'
Started PUT "/appointments/2" for ::1 at 2023-10-11 12:20:19 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:38:in `set_appointment'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
Completed 500 Internal Server Error in 21ms (ActiveRecord: 0.6ms | Allocations: 5312)


  
NameError (uninitialized constant ApplicationController::JsonResponse

    render json: JsonResponse.new(options), status: status
                 ^^^^^^^^^^^^):
  
app/controllers/application_controller.rb:16:in `json_response'
app/controllers/application_controller.rb:4:in `render_success_response'
app/controllers/appointments_controller.rb:18:in `update'
Started PUT "/appointments/2" for ::1 at 2023-10-11 12:21:21 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (1.4ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:38:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
Completed 500 Internal Server Error in 18ms (ActiveRecord: 3.8ms | Allocations: 10935)


  
NameError (uninitialized constant ApplicationController::JsonResponse

    render json: JsonResponse.new(options), status: status
                 ^^^^^^^^^^^^):
  
app/controllers/application_controller.rb:17:in `json_response'
app/controllers/application_controller.rb:5:in `render_success_response'
app/controllers/appointments_controller.rb:18:in `update'
Started PUT "/appointments/2" for ::1 at 2023-10-11 12:21:34 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.9ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:38:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
Completed 500 Internal Server Error in 27ms (ActiveRecord: 6.1ms | Allocations: 11014)


  
NoMethodError (undefined method `json_response' for #<AppointmentsController:0x0000000002d500>

    json_response({ success: true, message: message, data: resources}, status)
    ^^^^^^^^^^^^^):
  
app/controllers/application_controller.rb:4:in `render_success_response'
app/controllers/appointments_controller.rb:18:in `update'
Started PUT "/appointments/2" for ::1 at 2023-10-11 12:22:00 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.4ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:38:in `set_appointment'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.61ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (10.1ms)
Completed 200 OK in 44ms (Views: 14.7ms | ActiveRecord: 6.7ms | Allocations: 11351)


Started PUT "/appointments/2" for ::1 at 2023-10-11 12:22:14 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:38:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.12ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.25ms)
Completed 200 OK in 17ms (Views: 0.6ms | ActiveRecord: 3.1ms | Allocations: 9422)


Started PUT "/appointments/2" for ::1 at 2023-10-11 12:22:37 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.4ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:38:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (16.76ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (25.97ms)
Completed 500 Internal Server Error in 74ms (ActiveRecord: 4.3ms | Allocations: 19485)


  
NoMethodError (undefined method `appotiment_time' for #<Appointment id: 2, patient_name: "nishi", appointment_time: "2023-10-11 16:00:00.000000000 +0000", doctor_id: 1, created_at: "2023-10-11 09:43:31.830251000 +0000", updated_at: "2023-10-11 10:08:19.236325000 +0000">
Did you mean?  appointment_time
               appointment_time?
               appointment_time=):
  
app/controllers/application_controller.rb:16:in `json_response'
app/controllers/application_controller.rb:4:in `render_success_response'
app/controllers/appointments_controller.rb:18:in `update'
Started PUT "/appointments/2" for ::1 at 2023-10-11 12:22:48 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.4ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:38:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.17ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.34ms)
Completed 200 OK in 13ms (Views: 0.6ms | ActiveRecord: 1.3ms | Allocations: 9522)


  [1m[36mAppointment Load (1.0ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDoctor Load (0.5ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Started PUT "/appointments/2" for ::1 at 2023-10-11 12:23:35 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.7ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:38:in `set_appointment'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.14ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.3ms)
Completed 200 OK in 17ms (Views: 1.1ms | ActiveRecord: 2.5ms | Allocations: 9587)


Started PUT "/appointments/2" for ::1 at 2023-10-11 12:26:01 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:40:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.16ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (43.47ms)
Completed 200 OK in 72ms (Views: 44.2ms | ActiveRecord: 3.0ms | Allocations: 9502)


Started PUT "/appointments/2" for ::1 at 2023-10-11 12:28:01 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:40:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.15ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.33ms)
Completed 200 OK in 26ms (Views: 1.2ms | ActiveRecord: 3.5ms | Allocations: 9578)


Started PUT "/appointments/2" for ::1 at 2023-10-11 12:28:13 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"16pm", "id"=>"2", "appointment"=>{"appointment_time"=>"16pm"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:39:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.83ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.31ms)
Completed 200 OK in 21ms (Views: 3.0ms | ActiveRecord: 3.9ms | Allocations: 9591)


Started PUT "/appointments/2" for ::1 at 2023-10-11 12:28:21 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"12pm", "id"=>"2", "appointment"=>{"appointment_time"=>"12pm"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:39:in `set_appointment'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 12:00:00' AND appointment_time <= '2023-10-11 12:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Update (1.2ms)[0m  [1m[33mUPDATE "appointments" SET "appointment_time" = ?, "updated_at" = ? WHERE "appointments"."id" = ?[0m  [["appointment_time", "2023-10-11 12:00:00"], ["updated_at", "2023-10-11 10:28:21.028268"], ["id", 2]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.14ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.32ms)
Completed 200 OK in 14ms (Views: 0.6ms | ActiveRecord: 2.5ms | Allocations: 4739)


Started POST "/appointments" for ::1 at 2023-10-11 12:29:09 +0200
  
ActionController::RoutingError (No route matches [POST] "/appointments"):
  
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:29:46 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"2pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (1.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 14:00:00' AND appointment_time <= '2023-10-11 14:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.53ms)
Completed 422 Unprocessable Entity in 32ms (Views: 1.2ms | ActiveRecord: 4.2ms | Allocations: 9117)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:29:49 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"5pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:40:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 17:00:00' AND appointment_time <= '2023-10-11 17:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Create (0.2ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 17:00:00"], ["doctor_id", 1], ["created_at", "2023-10-11 10:29:49.956973"], ["updated_at", "2023-10-11 10:29:49.956973"]]
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:30:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 201 Created in 12ms (Views: 0.4ms | ActiveRecord: 1.1ms | Allocations: 3345)


  [1m[36mAppointment Load (1.1ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
Started PUT "/appointments/1" for ::1 at 2023-10-11 12:30:25 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"12pm", "id"=>"1", "appointment"=>{"appointment_time"=>"12pm"}}
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:39:in `set_appointment'
Completed 404 Not Found in 4ms (ActiveRecord: 0.3ms | Allocations: 871)


  
ActiveRecord::RecordNotFound (Couldn't find Appointment with 'id'=1):
  
app/controllers/appointments_controller.rb:39:in `set_appointment'
Started PUT "/appointments/9" for ::1 at 2023-10-11 12:30:35 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"12pm", "id"=>"9", "appointment"=>{"appointment_time"=>"12pm"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:39:in `set_appointment'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 12:00:00' AND appointment_time <= '2023-10-11 12:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 9], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
Completed 500 Internal Server Error in 28ms (ActiveRecord: 0.6ms | Allocations: 6091)


  
NoMethodError (undefined method `render_error_response' for #<AppointmentsController:0x0000000004ef70>

      render_error_response(errors: @appointment.errors.full_messages, status: :unprocessable_entity)
      ^^^^^^^^^^^^^^^^^^^^^
Did you mean?  render_failure_response):
  
app/controllers/appointments_controller.rb:23:in `update'
Started PUT "/appointments/9" for ::1 at 2023-10-11 12:30:49 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"12pm", "id"=>"9", "appointment"=>{"appointment_time"=>"12pm"}}
  [1m[36mAppointment Load (1.4ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:39:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 12:00:00' AND appointment_time <= '2023-10-11 12:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 9], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.96ms)
Completed 200 OK in 18ms (Views: 1.5ms | ActiveRecord: 5.3ms | Allocations: 9267)


Started PUT "/appointments/9" for ::1 at 2023-10-11 12:30:58 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"12pm", "id"=>"9", "appointment"=>{"appointment_time"=>"12pm"}}
  [1m[36mAppointment Load (0.9ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:39:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 12:00:00' AND appointment_time <= '2023-10-11 12:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 9], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 17ms (Views: 1.1ms | ActiveRecord: 3.8ms | Allocations: 9172)


Started PUT "/appointments/9" for ::1 at 2023-10-11 12:31:05 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"2pm", "id"=>"9", "appointment"=>{"appointment_time"=>"2pm"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:39:in `set_appointment'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 14:00:00' AND appointment_time <= '2023-10-11 14:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 9], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.21ms)
Completed 200 OK in 17ms (Views: 3.3ms | ActiveRecord: 0.5ms | Allocations: 3655)


Started PUT "/appointments/9" for ::1 at 2023-10-11 12:31:09 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"10pm", "id"=>"9", "appointment"=>{"appointment_time"=>"10pm"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:39:in `set_appointment'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 22:00:00' AND appointment_time <= '2023-10-11 22:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 9], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 13ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 3606)


Started PUT "/appointments/9" for ::1 at 2023-10-11 12:31:15 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"6pm", "id"=>"9", "appointment"=>{"appointment_time"=>"6pm"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:39:in `set_appointment'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 18:00:00' AND appointment_time <= '2023-10-11 18:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 9], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Update (0.8ms)[0m  [1m[33mUPDATE "appointments" SET "appointment_time" = ?, "updated_at" = ? WHERE "appointments"."id" = ?[0m  [["appointment_time", "2023-10-11 18:00:00"], ["updated_at", "2023-10-11 10:31:15.066641"], ["id", 9]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.24ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.44ms)
Completed 200 OK in 47ms (Views: 0.7ms | ActiveRecord: 2.1ms | Allocations: 4798)


Started PUT "/appointments/9" for ::1 at 2023-10-11 12:32:37 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"6pm", "id"=>"9", "appointment"=>{"appointment_time"=>"6pm"}}
  [1m[36mAppointment Load (0.1ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:39:in `set_appointment'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 18:00:00' AND appointment_time <= '2023-10-11 18:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 9], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.29ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.85ms)
Completed 200 OK in 50ms (Views: 5.6ms | ActiveRecord: 0.5ms | Allocations: 3880)


Started PUT "/appointments/9" for ::1 at 2023-10-11 12:32:41 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"6pm", "id"=>"9", "appointment"=>{"appointment_time"=>"6pm"}}
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:39:in `set_appointment'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 18:00:00' AND appointment_time <= '2023-10-11 18:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 9], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.12ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.27ms)
Completed 200 OK in 24ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 3686)


Started PUT "/appointments/9" for ::1 at 2023-10-11 12:32:44 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"6 pm", "id"=>"9", "appointment"=>{"appointment_time"=>"6 pm"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:39:in `set_appointment'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 18:00:00' AND appointment_time <= '2023-10-11 18:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 9], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.19ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.38ms)
Completed 200 OK in 18ms (Views: 0.7ms | ActiveRecord: 0.9ms | Allocations: 3690)


  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mAppointment Load (0.5ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
Started PUT "/appointments/9" for ::1 at 2023-10-11 12:33:15 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AppointmentsController#update as */*
  Parameters: {"appointment_time"=>"6pm", "id"=>"9", "appointment"=>{"appointment_time"=>"6pm"}}
  [1m[36mAppointment Load (0.0ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:39:in `set_appointment'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 18:00:00' AND appointment_time <= '2023-10-11 18:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 9], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.11ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.57ms)
Completed 200 OK in 18ms (Views: 2.2ms | ActiveRecord: 0.9ms | Allocations: 19843)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:35:00 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"5pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:42:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 17:00:00' AND appointment_time <= '2023-10-11 17:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Create (0.6ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 17:00:00"], ["doctor_id", 1], ["created_at", "2023-10-11 10:35:00.243738"], ["updated_at", "2023-10-11 10:35:00.243738"]]
  â†³ app/controllers/doctors_controller.rb:32:in `book_slot'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:32:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.03ms)
Completed 201 Created in 15ms (Views: 5.3ms | ActiveRecord: 1.6ms | Allocations: 9077)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:35:08 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"5.05 pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.6ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:42:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 17:00:00' AND appointment_time <= '2023-10-11 17:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:32:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 422 Unprocessable Entity in 15ms (Views: 0.3ms | ActiveRecord: 0.9ms | Allocations: 3659)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:35:14 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"5.15 pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:42:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 15:00:00' AND appointment_time <= '2023-10-11 15:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:32:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 422 Unprocessable Entity in 8ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 2688)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:35:17 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"5:15 pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:42:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 17:00:00' AND appointment_time <= '2023-10-11 17:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:32:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 422 Unprocessable Entity in 13ms (Views: 0.6ms | ActiveRecord: 0.8ms | Allocations: 2659)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:35:21 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"5 pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:42:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 17:00:00' AND appointment_time <= '2023-10-11 17:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:32:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 422 Unprocessable Entity in 8ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 2676)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:35:25 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"5pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:42:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 17:00:00' AND appointment_time <= '2023-10-11 17:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:32:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 422 Unprocessable Entity in 9ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 2653)


Started DELETE "/appointments/9" for ::1 at 2023-10-11 12:35:37 +0200
Processing by AppointmentsController#destroy as */*
  Parameters: {"appointment_time"=>"6pm", "id"=>"9", "appointment"=>{"appointment_time"=>"6pm"}}
  [1m[36mAppointment Load (0.1ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:39:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:29:in `destroy'
  [1m[36mAppointment Destroy (0.6ms)[0m  [1m[31mDELETE FROM "appointments" WHERE "appointments"."id" = ?[0m  [["id", 9]]
  â†³ app/controllers/appointments_controller.rb:29:in `destroy'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:29:in `destroy'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 2632)


Started DELETE "/appointments/1" for ::1 at 2023-10-11 12:35:42 +0200
Processing by AppointmentsController#destroy as */*
  Parameters: {"appointment_time"=>"6pm", "id"=>"1", "appointment"=>{"appointment_time"=>"6pm"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:39:in `set_appointment'
Completed 404 Not Found in 2ms (ActiveRecord: 0.2ms | Allocations: 553)


  
ActiveRecord::RecordNotFound (Couldn't find Appointment with 'id'=1):
  
app/controllers/appointments_controller.rb:39:in `set_appointment'
Started DELETE "/appointments/2" for ::1 at 2023-10-11 12:35:44 +0200
Processing by AppointmentsController#destroy as */*
  Parameters: {"appointment_time"=>"6pm", "id"=>"2", "appointment"=>{"appointment_time"=>"6pm"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:39:in `set_appointment'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:29:in `destroy'
  [1m[36mAppointment Destroy (0.6ms)[0m  [1m[31mDELETE FROM "appointments" WHERE "appointments"."id" = ?[0m  [["id", 2]]
  â†³ app/controllers/appointments_controller.rb:29:in `destroy'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:29:in `destroy'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 7ms (Views: 0.6ms | ActiveRecord: 1.7ms | Allocations: 2048)


  [1m[36mAppointment Load (0.5ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:35:58 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"6 m", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:42:in `set_doctor'
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 606)


  
Date::Error (invalid date):
  
app/controllers/doctors_controller.rb:25:in `parse'
app/controllers/doctors_controller.rb:25:in `book_slot'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:36:01 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"6 pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:42:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 18:00:00' AND appointment_time <= '2023-10-11 18:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Create (0.5ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 18:00:00"], ["doctor_id", 1], ["created_at", "2023-10-11 10:36:01.944449"], ["updated_at", "2023-10-11 10:36:01.944449"]]
  â†³ app/controllers/doctors_controller.rb:32:in `book_slot'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:32:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 201 Created in 12ms (Views: 0.9ms | ActiveRecord: 2.1ms | Allocations: 3307)


  [1m[36mAppointment Load (0.4ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:37:40 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"6:06 pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:42:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 18:00:00' AND appointment_time <= '2023-10-11 18:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:32:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 422 Unprocessable Entity in 24ms (Views: 6.6ms | ActiveRecord: 0.4ms | Allocations: 2699)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:45:27 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"6:10 pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms | Allocations: 5053)


  
NoMethodError (undefined method `set_doctor' for #<DoctorsController:0x000000000089a8>

              target.send(@method_name, &block)
                    ^^^^^):
  
activesupport (7.0.8) lib/active_support/callbacks.rb:400:in `block in make_lambda'
activesupport (7.0.8) lib/active_support/callbacks.rb:180:in `block (2 levels) in halting_and_conditional'
actionpack (7.0.8) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (7.0.8) lib/active_support/callbacks.rb:181:in `block in halting_and_conditional'
activesupport (7.0.8) lib/active_support/callbacks.rb:595:in `block in invoke_before'
activesupport (7.0.8) lib/active_support/callbacks.rb:595:in `each'
activesupport (7.0.8) lib/active_support/callbacks.rb:595:in `invoke_before'
activesupport (7.0.8) lib/active_support/callbacks.rb:106:in `run_callbacks'
actionpack (7.0.8) lib/abstract_controller/callbacks.rb:233:in `process_action'
actionpack (7.0.8) lib/action_controller/metal/rescue.rb:23:in `process_action'
actionpack (7.0.8) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'
activesupport (7.0.8) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.0.8) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (7.0.8) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.0.8) lib/action_controller/metal/instrumentation.rb:66:in `process_action'
actionpack (7.0.8) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (7.0.8) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (7.0.8) lib/abstract_controller/base.rb:151:in `process'
actionpack (7.0.8) lib/action_controller/metal.rb:188:in `dispatch'
actionpack (7.0.8) lib/action_controller/metal.rb:251:in `dispatch'
actionpack (7.0.8) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.0.8) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.0.8) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.0.8) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.8) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.8) lib/action_dispatch/routing/route_set.rb:852:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (7.0.8) lib/active_record/migration.rb:638:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.8) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.8) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.8) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
railties (7.0.8) lib/rails/engine.rb:530:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:45:51 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"6:10 pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:71:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Create (3.6ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 16:10:00"], ["doctor_id", 1], ["created_at", "2023-10-11 10:45:51.757910"], ["updated_at", "2023-10-11 10:45:51.757910"]]
  â†³ app/controllers/doctors_controller.rb:51:in `book_slot'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:51:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 201 Created in 59ms (Views: 1.9ms | ActiveRecord: 6.9ms | Allocations: 19897)


  [1m[36mAppointment Load (1.1ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:46:05 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"06:10 pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.5ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:71:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 16:00:00' AND appointment_time <= '2023-10-11 16:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:51:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 422 Unprocessable Entity in 35ms (Views: 0.6ms | ActiveRecord: 0.7ms | Allocations: 5775)


  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:46:24 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"02:10 pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:71:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 12:00:00' AND appointment_time <= '2023-10-11 12:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Create (0.7ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 12:10:00"], ["doctor_id", 1], ["created_at", "2023-10-11 10:46:24.266136"], ["updated_at", "2023-10-11 10:46:24.266136"]]
  â†³ app/controllers/doctors_controller.rb:51:in `book_slot'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:51:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 201 Created in 11ms (Views: 0.5ms | ActiveRecord: 2.1ms | Allocations: 5052)


  [1m[36mAppointment Load (0.5ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 12:46:34 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"02:10 am", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:71:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 00:00:00' AND appointment_time <= '2023-10-11 00:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Create (0.4ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 00:10:00"], ["doctor_id", 1], ["created_at", "2023-10-11 10:46:34.351010"], ["updated_at", "2023-10-11 10:46:34.351010"]]
  â†³ app/controllers/doctors_controller.rb:51:in `book_slot'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:51:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 201 Created in 11ms (Views: 0.4ms | ActiveRecord: 2.1ms | Allocations: 5005)


  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
Started GET "/doctors/1/working_hours" for ::1 at 2023-10-11 12:48:10 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:72:in `set_doctor'
  [1m[36mAvailability Load (0.0ms)[0m  [1m[34mSELECT "availabilities".* FROM "availabilities" WHERE "availabilities"."doctor_id" = ?[0m  [["doctor_id", 1]]
  â†³ app/models/doctor.rb:7:in `map'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 0.9ms | Allocations: 6659)


Started GET "/doctors/1/working_hours" for ::1 at 2023-10-11 12:54:53 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:72:in `set_doctor'
  [1m[36mAvailability Load (0.1ms)[0m  [1m[34mSELECT "availabilities".* FROM "availabilities" WHERE "availabilities"."doctor_id" = ?[0m  [["doctor_id", 1]]
  â†³ app/models/doctor.rb:15:in `map'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 0.8ms | Allocations: 6200)


  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddWorkingHoursToDoctors (20231011111947)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "doctors" ADD "working_hours" json[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20231011111947"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/doctors" for ::1 at 2023-10-11 13:20:12 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DoctorsController#create as */*
  Parameters: {"doctor"=>{"name"=>"Dr. John Doe", "specialty"=>"Cardiology", "working_hours"=>{"monday"=>"9:00 AM - 5:00 PM", "tuesday"=>"10:00 AM - 6:00 PM", "wednesday"=>"8:00 AM - 4:00 PM", "thursday"=>"9:30 AM - 5:30 PM", "friday"=>"8:30 AM - 4:30 PM", "saturday"=>"9:00 AM - 1:00 PM", "sunday"=>"Holiday"}}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/doctors_controller.rb:11:in `create'
  [1m[36mDoctor Create (0.3ms)[0m  [1m[32mINSERT INTO "doctors" ("name", "specialty", "created_at", "updated_at", "working_hours") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Dr. John Doe"], ["specialty", "Cardiology"], ["created_at", "2023-10-11 11:20:12.177248"], ["updated_at", "2023-10-11 11:20:12.177248"], ["working_hours", "{\"monday\":\"9:00 AM - 5:00 PM\",\"tuesday\":\"10:00 AM - 6:00 PM\",\"wednesday\":\"8:00 AM - 4:00 PM\",\"thursday\":\"9:30 AM - 5:30 PM\",\"friday\":\"8:30 AM - 4:30 PM\",\"saturday\":\"9:00 AM - 1:00 PM\",\"sunday\":\"Holiday\"}"]]
  â†³ app/controllers/doctors_controller.rb:11:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:11:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (2.57ms)
Completed 200 OK in 21ms (Views: 6.0ms | ActiveRecord: 0.9ms | Allocations: 12202)


Started POST "/doctors" for ::1 at 2023-10-11 13:20:30 +0200
Processing by DoctorsController#create as */*
  Parameters: {"doctor"=>{"name"=>"Dr. John Doe", "specialty"=>"Cardiology", "working_hours"=>{"monday"=>"9:00 AM - 5:00 PM", "tuesday"=>"10:00 AM - 6:00 PM", "wednesday"=>"8:00 AM - 4:00 PM", "thursday"=>"9:30 AM - 5:30 PM", "friday"=>"8:30 AM - 4:30 PM", "saturday"=>"9:00 AM - 1:00 PM", "sunday"=>"Holiday"}}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/doctors_controller.rb:11:in `create'
  [1m[36mDoctor Create (0.4ms)[0m  [1m[32mINSERT INTO "doctors" ("name", "specialty", "created_at", "updated_at", "working_hours") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Dr. John Doe"], ["specialty", "Cardiology"], ["created_at", "2023-10-11 11:20:30.873979"], ["updated_at", "2023-10-11 11:20:30.873979"], ["working_hours", "{\"monday\":\"9:00 AM - 5:00 PM\",\"tuesday\":\"10:00 AM - 6:00 PM\",\"wednesday\":\"8:00 AM - 4:00 PM\",\"thursday\":\"9:30 AM - 5:30 PM\",\"friday\":\"8:30 AM - 4:30 PM\",\"saturday\":\"9:00 AM - 1:00 PM\",\"sunday\":\"Holiday\"}"]]
  â†³ app/controllers/doctors_controller.rb:11:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:11:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 6ms (Views: 0.5ms | ActiveRecord: 1.0ms | Allocations: 5775)


Started POST "/doctors" for ::1 at 2023-10-11 13:20:42 +0200
Processing by DoctorsController#create as */*
  Parameters: {"doctor"=>{"name"=>"Dr. John Doe", "specialty"=>"Cardiology", "working_hours"=>{"monday"=>"9:00 AM - 5:00 PM", "tuesday"=>"10:00 AM - 6:00 PM", "wednesday"=>"8:00 AM - 4:00 PM", "thursday"=>"8:30 AM - 5:30 PM", "friday"=>"8:30 AM - 4:30 PM", "saturday"=>"9:00 AM - 1:00 PM", "sunday"=>"Holiday"}}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/doctors_controller.rb:11:in `create'
  [1m[36mDoctor Create (0.5ms)[0m  [1m[32mINSERT INTO "doctors" ("name", "specialty", "created_at", "updated_at", "working_hours") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Dr. John Doe"], ["specialty", "Cardiology"], ["created_at", "2023-10-11 11:20:42.133330"], ["updated_at", "2023-10-11 11:20:42.133330"], ["working_hours", "{\"monday\":\"9:00 AM - 5:00 PM\",\"tuesday\":\"10:00 AM - 6:00 PM\",\"wednesday\":\"8:00 AM - 4:00 PM\",\"thursday\":\"8:30 AM - 5:30 PM\",\"friday\":\"8:30 AM - 4:30 PM\",\"saturday\":\"9:00 AM - 1:00 PM\",\"sunday\":\"Holiday\"}"]]
  â†³ app/controllers/doctors_controller.rb:11:in `create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:11:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.1ms | Allocations: 2466)


Started GET "/doctors/4/working_hours" for ::1 at 2023-10-11 13:21:29 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.6ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:79:in `set_doctor'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 6ms (Views: 0.8ms | ActiveRecord: 0.6ms | Allocations: 1754)


Started GET "/doctors/4/working_hours" for ::1 at 2023-10-11 13:23:36 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:82:in `set_doctor'
[active_model_serializers] Rendered DoctorSerializer with ActiveModelSerializers::Adapter::Attributes (2.35ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (5.71ms)
Completed 500 Internal Server Error in 22ms (ActiveRecord: 0.3ms | Allocations: 20730)


  
NoMethodError (undefined method `model_name' for Hash:Class

          object.class.model_name.to_s.underscore
                      ^^^^^^^^^^^
Did you mean?  module_parent):
  
app/controllers/application_controller.rb:16:in `json_response'
app/controllers/application_controller.rb:4:in `render_success_response'
app/controllers/doctors_controller.rb:20:in `working_hours'
Started GET "/doctors/4/working_hours" for ::1 at 2023-10-11 13:24:45 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:82:in `set_doctor'
[active_model_serializers] Rendered DoctorSerializer with ActiveModelSerializers::Adapter::Attributes (10.03ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (10.84ms)
Completed 500 Internal Server Error in 25ms (ActiveRecord: 0.7ms | Allocations: 13349)


  
NoMethodError (undefined method `model_name' for Hash:Class

          object.class.model_name.to_s.underscore
                      ^^^^^^^^^^^
Did you mean?  module_parent):
  
app/controllers/application_controller.rb:16:in `json_response'
app/controllers/application_controller.rb:4:in `render_success_response'
app/controllers/doctors_controller.rb:20:in `working_hours'
Started GET "/doctors/4/working_hours" for ::1 at 2023-10-11 13:25:11 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:82:in `set_doctor'
[active_model_serializers] Rendered DoctorSerializer with ActiveModelSerializers::Adapter::Attributes (13.89ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (24.89ms)
Completed 500 Internal Server Error in 48ms (ActiveRecord: 1.3ms | Allocations: 13291)


  
NoMethodError (undefined method `model_name' for Hash:Class

          object.class.model_name.to_s.underscore
                      ^^^^^^^^^^^
Did you mean?  module_parent):
  
app/controllers/application_controller.rb:16:in `json_response'
app/controllers/application_controller.rb:4:in `render_success_response'
app/controllers/doctors_controller.rb:20:in `working_hours'
Started GET "/doctors/4/working_hours" for ::1 at 2023-10-11 13:26:10 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:82:in `set_doctor'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (2.53ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (4.86ms)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.8ms | Allocations: 13280)


  
NoMethodError (undefined method `model_name' for Hash:Class

          object.class.model_name.to_s.underscore
                      ^^^^^^^^^^^
Did you mean?  module_parent):
  
app/controllers/application_controller.rb:16:in `json_response'
app/controllers/application_controller.rb:4:in `render_success_response'
app/controllers/doctors_controller.rb:20:in `working_hours'
Started GET "/doctors/4/working_hours" for ::1 at 2023-10-11 13:26:31 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:82:in `set_doctor'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (2.62ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (8.4ms)
Completed 500 Internal Server Error in 17ms (ActiveRecord: 1.0ms | Allocations: 13251)


  
NoMethodError (undefined method `model_name' for Hash:Class

          object.class.model_name.to_s.underscore
                      ^^^^^^^^^^^
Did you mean?  module_parent):
  
app/controllers/application_controller.rb:16:in `json_response'
app/controllers/application_controller.rb:4:in `render_success_response'
app/controllers/doctors_controller.rb:20:in `working_hours'
Started GET "/doctors/4/working_hours" for ::1 at 2023-10-11 13:27:11 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:83:in `set_doctor'
[active_model_serializers] Rendered DoctorSerializer with ActiveModelSerializers::Adapter::Attributes (3.2ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (4.57ms)
Completed 500 Internal Server Error in 17ms (ActiveRecord: 1.8ms | Allocations: 13310)


  
NoMethodError (undefined method `model_name' for Hash:Class

          object.class.model_name.to_s.underscore
                      ^^^^^^^^^^^
Did you mean?  module_parent):
  
app/controllers/application_controller.rb:16:in `json_response'
app/controllers/application_controller.rb:4:in `render_success_response'
app/controllers/doctors_controller.rb:21:in `working_hours'
  [1m[36mDoctor Load (0.9ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Started GET "/doctors/4/working_hours" for ::1 at 2023-10-11 13:27:43 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:84:in `set_doctor'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.7ms | Allocations: 5264)


  
NoMethodError (undefined method `pry' for #<Binding:0x0000000106749210>

      binding.pry
             ^^^^
Did you mean?  try):
  
app/controllers/doctors_controller.rb:21:in `working_hours'
Started GET "/doctors/4/working_hours" for ::1 at 2023-10-11 13:27:51 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:84:in `set_doctor'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.3ms | Allocations: 1448)


  
NoMethodError (undefined method `pry' for #<Binding:0x00000001069ba8a0>

      binding.pry
             ^^^^
Did you mean?  try):
  
app/controllers/doctors_controller.rb:21:in `working_hours'
Started GET "/doctors/4/working_hours" for ::1 at 2023-10-11 13:28:16 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:84:in `set_doctor'
[active_model_serializers] Rendered DoctorSerializer with ActiveModelSerializers::Adapter::Attributes (5.81ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (11.85ms)
Completed 500 Internal Server Error in 79851ms (ActiveRecord: 0.3ms | Allocations: 73786)


  
NoMethodError (undefined method `model_name' for Hash:Class

          object.class.model_name.to_s.underscore
                      ^^^^^^^^^^^
Did you mean?  module_parent):
  
app/controllers/application_controller.rb:16:in `json_response'
app/controllers/application_controller.rb:4:in `render_success_response'
app/controllers/doctors_controller.rb:22:in `working_hours'
Started GET "/doctors/4/working_hours" for ::1 at 2023-10-11 13:30:07 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:79:in `set_doctor'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 4773)


Started GET "/doctors/4/working_hours" for ::1 at 2023-10-11 13:30:24 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:79:in `set_doctor'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 0.6ms | Allocations: 4667)


Started GET "/doctors/4/working_hours" for ::1 at 2023-10-11 13:30:44 +0200
  
SyntaxError (/Users/enercentadmin/Desktop/doctor_scheduling_system/app/controllers/doctors_controller.rb:20: syntax error, unexpected ':', expecting '}'
...ccess_response{ working_hours :working_hours }
...                              ^
/Users/enercentadmin/Desktop/doctor_scheduling_system/app/controllers/doctors_controller.rb:85: syntax error, unexpected end-of-input, expecting `end'):
  
app/controllers/doctors_controller.rb:20: syntax error, unexpected ':', expecting '}'
app/controllers/doctors_controller.rb:85: syntax error, unexpected end-of-input, expecting `end'
app/controllers/doctors_controller.rb:20: syntax error, unexpected ':', expecting '}'
app/controllers/doctors_controller.rb:85: syntax error, unexpected end-of-input, expecting `end'
Started GET "/doctors/4/working_hours" for ::1 at 2023-10-11 13:31:15 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:79:in `set_doctor'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 14ms (Views: 2.3ms | ActiveRecord: 1.2ms | Allocations: 4686)


Started GET "/doctors/4/vailability" for ::1 at 2023-10-11 13:31:48 +0200
  
ActionController::RoutingError (No route matches [GET] "/doctors/4/vailability"):
  
Started GET "/doctors/4/availability" for ::1 at 2023-10-11 13:31:56 +0200
  
SyntaxError (/Users/enercentadmin/Desktop/doctor_scheduling_system/app/controllers/doctors_controller.rb:26: syntax error, unexpected '\n', expecting =>
...orking_hours: availabilities })
...                               ^
/Users/enercentadmin/Desktop/doctor_scheduling_system/app/controllers/doctors_controller.rb:85: syntax error, unexpected end-of-input, expecting `end'):
  
app/controllers/doctors_controller.rb:26: syntax error, unexpected '\n', expecting =>
app/controllers/doctors_controller.rb:85: syntax error, unexpected end-of-input, expecting `end'
app/controllers/doctors_controller.rb:26: syntax error, unexpected '\n', expecting =>
app/controllers/doctors_controller.rb:85: syntax error, unexpected end-of-input, expecting `end'
Started GET "/doctors/4/availability" for ::1 at 2023-10-11 13:32:24 +0200
Processing by DoctorsController#availability as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:79:in `set_doctor'
[active_model_serializers]   [1m[36mAvailability Load (0.2ms)[0m  [1m[34mSELECT "availabilities".* FROM "availabilities" WHERE "availabilities"."doctor_id" = ?[0m  [["doctor_id", 4]]
[active_model_serializers]   â†³ app/controllers/application_controller.rb:16:in `json_response'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (3.81ms)
Completed 200 OK in 29ms (Views: 3.9ms | ActiveRecord: 2.0ms | Allocations: 8707)


Started GET "/doctors/4/availability" for ::1 at 2023-10-11 13:32:32 +0200
Processing by DoctorsController#availability as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:79:in `set_doctor'
[active_model_serializers]   [1m[36mAvailability Load (0.3ms)[0m  [1m[34mSELECT "availabilities".* FROM "availabilities" WHERE "availabilities"."doctor_id" = ?[0m  [["doctor_id", 4]]
[active_model_serializers]   â†³ app/controllers/application_controller.rb:16:in `json_response'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.76ms)
Completed 200 OK in 9ms (Views: 2.4ms | ActiveRecord: 1.5ms | Allocations: 7096)


Started GET "/doctors/4/availability" for ::1 at 2023-10-11 13:34:39 +0200
Processing by DoctorsController#availability as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:104:in `set_doctor'
  [1m[36mCACHE Doctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:25:in `availability'
  [1m[36mAppointment Pluck (0.2ms)[0m  [1m[34mSELECT "appointments"."appointment_time" FROM "appointments" WHERE "appointments"."doctor_id" = ?[0m  [["doctor_id", 4]]
  â†³ app/controllers/doctors_controller.rb:26:in `availability'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.29ms)
Completed 200 OK in 20ms (Views: 1.6ms | ActiveRecord: 2.5ms | Allocations: 9086)


  [1m[36mAppointment Load (1.6ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 13:35:52 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"12:10 am", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:104:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-10 22:00:00' AND appointment_time <= '2023-10-10 22:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Create (1.4ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-10 22:10:00"], ["doctor_id", 1], ["created_at", "2023-10-11 11:35:52.235448"], ["updated_at", "2023-10-11 11:35:52.235448"]]
  â†³ app/controllers/doctors_controller.rb:84:in `book_slot'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:84:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 201 Created in 45ms (Views: 0.4ms | ActiveRecord: 3.8ms | Allocations: 10794)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 13:35:55 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"12:10 pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:104:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 10:00:00' AND appointment_time <= '2023-10-11 10:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Create (1.2ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 10:10:00"], ["doctor_id", 1], ["created_at", "2023-10-11 11:35:55.749294"], ["updated_at", "2023-10-11 11:35:55.749294"]]
  â†³ app/controllers/doctors_controller.rb:84:in `book_slot'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:84:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 201 Created in 13ms (Views: 0.5ms | ActiveRecord: 2.8ms | Allocations: 5157)


  [1m[36mAppointment Load (0.8ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 13:36:26 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"12:00 PM", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:104:in `set_doctor'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 10:00:00' AND appointment_time <= '2023-10-11 10:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:84:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.04ms)
Completed 422 Unprocessable Entity in 61ms (Views: 2.0ms | ActiveRecord: 1.2ms | Allocations: 5392)


  [1m[36mAppointment Load (0.8ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
Started GET "/doctors/4/availability" for ::1 at 2023-10-11 13:38:04 +0200
Processing by DoctorsController#availability as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:104:in `set_doctor'
  [1m[36mCACHE Doctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:25:in `availability'
  [1m[36mAppointment Pluck (0.1ms)[0m  [1m[34mSELECT "appointments"."appointment_time" FROM "appointments" WHERE "appointments"."doctor_id" = ?[0m  [["doctor_id", 4]]
  â†³ app/controllers/doctors_controller.rb:26:in `availability'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.35ms)
Completed 200 OK in 10ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 3530)


  [1m[36mAppointment Load (0.4ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
  [1m[36mDoctor Load (1.5ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAvailability Load (0.1ms)[0m  [1m[34mSELECT "availabilities".* FROM "availabilities" WHERE "availabilities"."doctor_id" = ?[0m  [["doctor_id", 4]]
Started GET "/doctors/4" for ::1 at 2023-10-11 13:39:19 +0200
  
ActionController::RoutingError (No route matches [GET] "/doctors/4"):
  
Started GET "/doctors/4" for ::1 at 2023-10-11 13:39:46 +0200
Processing by DoctorsController#show as */*
  Parameters: {"doctor"=>{"name"=>"Dr. John Doe", "specialty"=>"Cardiology", "working_hours"=>{"monday"=>"9:00 AM - 5:00 PM", "tuesday"=>"10:00 AM - 6:00 PM", "wednesday"=>"8:00 AM - 4:00 PM", "thursday"=>"8:30 AM - 5:30 PM", "friday"=>"8:30 AM - 4:30 PM", "saturday"=>"9:00 AM - 1:00 PM", "sunday"=>"Holiday"}}, "id"=>"4"}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:11:in `show'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.7ms)
Completed 200 OK in 9ms (Views: 1.1ms | ActiveRecord: 1.0ms | Allocations: 3614)


Started GET "/doctors/4" for ::1 at 2023-10-11 13:39:51 +0200
Processing by DoctorsController#show as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:11:in `show'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.45ms)
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 810)


  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAvailability Load (0.1ms)[0m  [1m[34mSELECT "availabilities".* FROM "availabilities" WHERE "availabilities"."doctor_id" = ?[0m  [["doctor_id", 4]]
Started GET "/doctors/4/availability" for ::1 at 2023-10-11 13:40:29 +0200
Processing by DoctorsController#availability as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:109:in `set_doctor'
  [1m[36mCACHE Doctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:30:in `availability'
  [1m[36mAppointment Pluck (0.1ms)[0m  [1m[34mSELECT "appointments"."appointment_time" FROM "appointments" WHERE "appointments"."doctor_id" = ?[0m  [["doctor_id", 4]]
  â†³ app/controllers/doctors_controller.rb:31:in `availability'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.36ms)
Completed 200 OK in 20ms (Views: 0.7ms | ActiveRecord: 0.7ms | Allocations: 6070)


Started GET "/doctors/1/working_hours" for ::1 at 2023-10-11 13:42:44 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (2.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:107:in `set_doctor'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 2.5ms | Allocations: 4621)


Started POST "/doctors" for ::1 at 2023-10-11 13:42:48 +0200
Processing by DoctorsController#create as */*
  Parameters: {"doctor"=>{"name"=>"Dr. John Doe", "specialty"=>"Cardiology", "working_hours"=>{"monday"=>"9:00 AM - 5:00 PM", "tuesday"=>"10:00 AM - 6:00 PM", "wednesday"=>"8:00 AM - 4:00 PM", "thursday"=>"8:30 AM - 5:30 PM", "friday"=>"8:30 AM - 4:30 PM", "saturday"=>"9:00 AM - 1:00 PM", "sunday"=>"Holiday"}}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/doctors_controller.rb:16:in `create'
  [1m[36mDoctor Create (1.4ms)[0m  [1m[32mINSERT INTO "doctors" ("name", "specialty", "created_at", "updated_at", "working_hours") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Dr. John Doe"], ["specialty", "Cardiology"], ["created_at", "2023-10-11 11:42:48.877931"], ["updated_at", "2023-10-11 11:42:48.877931"], ["working_hours", "{\"monday\":\"9:00 AM - 5:00 PM\",\"tuesday\":\"10:00 AM - 6:00 PM\",\"wednesday\":\"8:00 AM - 4:00 PM\",\"thursday\":\"8:30 AM - 5:30 PM\",\"friday\":\"8:30 AM - 4:30 PM\",\"saturday\":\"9:00 AM - 1:00 PM\",\"sunday\":\"Holiday\"}"]]
  â†³ app/controllers/doctors_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:16:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 11ms (Views: 0.4ms | ActiveRecord: 2.1ms | Allocations: 2873)


Started POST "/doctors/4/working_hours" for ::1 at 2023-10-11 13:43:04 +0200
  
ActionController::RoutingError (No route matches [POST] "/doctors/4/working_hours"):
  
Started GET "/doctors/4/working_hours" for ::1 at 2023-10-11 13:43:09 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"doctor"=>{"name"=>"Dr. John Doe", "specialty"=>"Cardiology", "working_hours"=>{"monday"=>"9:00 AM - 5:00 PM", "tuesday"=>"10:00 AM - 6:00 PM", "wednesday"=>"8:00 AM - 4:00 PM", "thursday"=>"8:30 AM - 5:30 PM", "friday"=>"8:30 AM - 4:30 PM", "saturday"=>"9:00 AM - 1:00 PM", "sunday"=>"Holiday"}}, "id"=>"4"}
  [1m[36mDoctor Load (0.5ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:107:in `set_doctor'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 737)


Started PUT "/appointments/2" for ::1 at 2023-10-11 13:48:50 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"patient_name"=>"supri", "appointment_time"=>"09-10-2023 1:00", "id"=>"2", "appointment"=>{"patient_name"=>"supri", "appointment_time"=>"09-10-2023 1:00"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:48:in `set_appointment'
Completed 404 Not Found in 2ms (ActiveRecord: 0.5ms | Allocations: 1093)


  
ActiveRecord::RecordNotFound (Couldn't find Appointment with 'id'=2):
  
app/controllers/appointments_controller.rb:48:in `set_appointment'
Started PUT "/appointments/3" for ::1 at 2023-10-11 13:48:55 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"patient_name"=>"supri", "appointment_time"=>"09-10-2023 1:00", "id"=>"3", "appointment"=>{"patient_name"=>"supri", "appointment_time"=>"09-10-2023 1:00"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:48:in `set_appointment'
Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms | Allocations: 4114)


  
NameError (undefined local variable or method `appointment' for #<AppointmentsController:0x00000000031240>

    if appointment.update!(appointment_params)
       ^^^^^^^^^^^
Did you mean?  @appointment):
  
app/controllers/appointments_controller.rb:26:in `update'
Started PUT "/appointments/3" for ::1 at 2023-10-11 13:49:18 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"patient_name"=>"supri", "appointment_time"=>"09-10-2023 1:00", "id"=>"3", "appointment"=>{"patient_name"=>"supri", "appointment_time"=>"09-10-2023 1:00"}}
  [1m[36mAppointment Load (0.4ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:48:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:26:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:26:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-09 01:00:00' AND appointment_time <= '2023-10-09 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 3], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Update (0.5ms)[0m  [1m[33mUPDATE "appointments" SET "patient_name" = ?, "appointment_time" = ?, "updated_at" = ? WHERE "appointments"."id" = ?[0m  [["patient_name", "supri"], ["appointment_time", "2023-10-09 01:00:00"], ["updated_at", "2023-10-11 11:49:18.307447"], ["id", 3]]
  â†³ app/controllers/appointments_controller.rb:26:in `update'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:26:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.39ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.63ms)
Completed 200 OK in 27ms (Views: 1.2ms | ActiveRecord: 3.4ms | Allocations: 10779)


Started PUT "/appointments/3" for ::1 at 2023-10-11 13:49:26 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"patient_name"=>"supri", "appointment_time"=>"09-10-2023 1:00", "id"=>"3", "appointment"=>{"patient_name"=>"supri", "appointment_time"=>"09-10-2023 1:00"}}
  [1m[36mAppointment Load (0.5ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:48:in `set_appointment'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:26:in `update'
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:26:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-09 01:00:00' AND appointment_time <= '2023-10-09 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 3], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:26:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.16ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.4ms)
Completed 200 OK in 18ms (Views: 0.7ms | ActiveRecord: 0.9ms | Allocations: 3983)


Started PUT "/appointments/3" for ::1 at 2023-10-11 13:49:32 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"patient_name"=>"supri", "appointment_time"=>"09-10-2023 12:00", "id"=>"3", "appointment"=>{"patient_name"=>"supri", "appointment_time"=>"09-10-2023 12:00"}}
  [1m[36mAppointment Load (0.1ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:48:in `set_appointment'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:26:in `update'
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:26:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-09 12:00:00' AND appointment_time <= '2023-10-09 12:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 3], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Update (0.7ms)[0m  [1m[33mUPDATE "appointments" SET "appointment_time" = ?, "updated_at" = ? WHERE "appointments"."id" = ?[0m  [["appointment_time", "2023-10-09 12:00:00"], ["updated_at", "2023-10-11 11:49:32.853591"], ["id", 3]]
  â†³ app/controllers/appointments_controller.rb:26:in `update'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:26:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.13ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.4ms)
Completed 200 OK in 14ms (Views: 2.2ms | ActiveRecord: 2.0ms | Allocations: 4373)


Started PUT "/appointments/4" for ::1 at 2023-10-11 13:49:44 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"patient_name"=>"supri", "appointment_time"=>"09-10-2023 4:00", "id"=>"4", "appointment"=>{"patient_name"=>"supri", "appointment_time"=>"09-10-2023 4:00"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:48:in `set_appointment'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:26:in `update'
  [1m[36mDoctor Load (1.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:26:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-09 04:00:00' AND appointment_time <= '2023-10-09 04:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 4], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Update (0.3ms)[0m  [1m[33mUPDATE "appointments" SET "patient_name" = ?, "appointment_time" = ?, "updated_at" = ? WHERE "appointments"."id" = ?[0m  [["patient_name", "supri"], ["appointment_time", "2023-10-09 04:00:00"], ["updated_at", "2023-10-11 11:49:44.028097"], ["id", 4]]
  â†³ app/controllers/appointments_controller.rb:26:in `update'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:26:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.12ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.29ms)
Completed 200 OK in 11ms (Views: 0.5ms | ActiveRecord: 2.2ms | Allocations: 4342)


Started PUT "/appointments/4" for ::1 at 2023-10-11 13:50:09 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"patient_name"=>"supri", "appointment_time"=>"09-10-2023 4:00", "id"=>"4", "appointment"=>{"patient_name"=>"supri", "appointment_time"=>"09-10-2023 4:00"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:49:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-09 04:00:00' AND appointment_time <= '2023-10-09 04:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 4], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.12ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.48ms)
Completed 200 OK in 10ms (Views: 0.8ms | ActiveRecord: 1.9ms | Allocations: 9798)


Started PUT "/appointments/4" for ::1 at 2023-10-11 13:50:14 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"patient_name"=>"supri", "appointment_time"=>"09-10-2023 12:00", "id"=>"4", "appointment"=>{"patient_name"=>"supri", "appointment_time"=>"09-10-2023 12:00"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:49:in `set_appointment'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-09 12:00:00' AND appointment_time <= '2023-10-09 12:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 4], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 28ms (Views: 0.3ms | ActiveRecord: 0.6ms | Allocations: 4484)


Started PUT "/appointments/4" for ::1 at 2023-10-11 13:50:39 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"patient_name"=>"supri", "appointment_time"=>"09-10-2023 12:00", "id"=>"4", "appointment"=>{"patient_name"=>"supri", "appointment_time"=>"09-10-2023 12:00"}}
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:49:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:27:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-09 12:00:00' AND appointment_time <= '2023-10-09 12:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 4], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/appointments_controller.rb:27:in `update'
Completed 422 Unprocessable Entity in 8ms (ActiveRecord: 1.2ms | Allocations: 9156)


  
ActiveRecord::RecordInvalid (Validation failed: Doctor already has an appointment at this time):
  
app/controllers/appointments_controller.rb:27:in `update'
Started PUT "/appointments/4" for ::1 at 2023-10-11 13:51:00 +0200
  
SyntaxError (/Users/enercentadmin/Desktop/doctor_scheduling_system/app/controllers/appointments_controller.rb:55: syntax error, unexpected `end', expecting end-of-input):
  
app/controllers/appointments_controller.rb:55: syntax error, unexpected `end', expecting end-of-input
app/controllers/appointments_controller.rb:55: syntax error, unexpected `end', expecting end-of-input
Started PUT "/appointments/4" for ::1 at 2023-10-11 13:51:05 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"patient_name"=>"supri", "appointment_time"=>"09-10-2023 12:00", "id"=>"4", "appointment"=>{"patient_name"=>"supri", "appointment_time"=>"09-10-2023 12:00"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:48:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-09 12:00:00' AND appointment_time <= '2023-10-09 12:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 4], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 11ms (Views: 1.9ms | ActiveRecord: 1.8ms | Allocations: 9433)


Started PUT "/appointments/4" for ::1 at 2023-10-11 13:51:21 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"patient_name"=>"supri", "appointment_time"=>"09-10-2023 2:00", "id"=>"4", "appointment"=>{"patient_name"=>"supri", "appointment_time"=>"09-10-2023 2:00"}}
  [1m[36mAppointment Load (0.6ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:38:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mAppointment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-09 02:00:00' AND appointment_time <= '2023-10-09 02:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 4], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Update (7.1ms)[0m  [1m[33mUPDATE "appointments" SET "appointment_time" = ?, "updated_at" = ? WHERE "appointments"."id" = ?[0m  [["appointment_time", "2023-10-09 02:00:00"], ["updated_at", "2023-10-11 11:51:21.908062"], ["id", 4]]
  â†³ app/controllers/appointments_controller.rb:17:in `update'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.52ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (4.73ms)
Completed 200 OK in 29ms (Views: 7.8ms | ActiveRecord: 11.5ms | Allocations: 10474)


Started GET "/doctors/1" for ::1 at 2023-10-11 13:53:19 +0200
Processing by DoctorsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:11:in `show'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.78ms)
Completed 200 OK in 15ms (Views: 1.1ms | ActiveRecord: 3.6ms | Allocations: 4731)


Started GET "/" for ::1 at 2023-10-11 13:55:09 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/enercentadmin/.rvm/gems/ruby-3.1.0/gems/railties-7.0.8/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/enercentadmin/.rvm/gems/ruby-3.1.0/gems/railties-7.0.8/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.7ms | Allocations: 526)
Completed 200 OK in 9ms (Views: 2.0ms | ActiveRecord: 0.0ms | Allocations: 4744)


Started GET "/doctors" for ::1 at 2023-10-11 13:55:13 +0200
Processing by DoctorsController#index as HTML
[active_model_serializers]   [1m[36mDoctor Load (0.5ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
[active_model_serializers]   â†³ app/controllers/application_controller.rb:16:in `json_response'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (11.01ms)
Completed 200 OK in 19ms (Views: 11.4ms | ActiveRecord: 1.3ms | Allocations: 9650)


Started GET "/doctors/1" for ::1 at 2023-10-11 13:55:16 +0200
Processing by DoctorsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:15:in `show'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.34ms)
Completed 200 OK in 4ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 1769)


Started GET "/doctors/new" for ::1 at 2023-10-11 13:55:19 +0200
Processing by DoctorsController#new as HTML
Completed 204 No Content in 1ms (ActiveRecord: 0.0ms | Allocations: 109)


Started GET "/doctors/new" for ::1 at 2023-10-11 13:55:37 +0200
Processing by DoctorsController#new as HTML
Completed 204 No Content in 1ms (ActiveRecord: 0.0ms | Allocations: 43)


Started GET "/" for ::1 at 2023-10-11 13:56:55 +0200
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/enercentadmin/.rvm/gems/ruby-3.1.0/gems/railties-7.0.8/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/enercentadmin/.rvm/gems/ruby-3.1.0/gems/railties-7.0.8/lib/rails/templates/rails/welcome/index.html.erb (Duration: 2.7ms | Allocations: 296)
Completed 200 OK in 43ms (Views: 14.1ms | ActiveRecord: 0.0ms | Allocations: 1026)


Started GET "/favicon.ico" for ::1 at 2023-10-11 13:56:56 +0200
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/" for ::1 at 2023-10-11 13:57:00 +0200
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/enercentadmin/.rvm/gems/ruby-3.1.0/gems/railties-7.0.8/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/enercentadmin/.rvm/gems/ruby-3.1.0/gems/railties-7.0.8/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.1ms | Allocations: 16)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 230)


Started GET "/doctors" for ::1 at 2023-10-11 13:57:02 +0200
Processing by DoctorsController#index as HTML
[active_model_serializers]   [1m[36mDoctor Load (3.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
[active_model_serializers]   â†³ app/controllers/application_controller.rb:16:in `json_response'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (17.66ms)
Completed 200 OK in 34ms (Views: 16.2ms | ActiveRecord: 3.1ms | Allocations: 1947)


Started GET "/doctors/new" for ::1 at 2023-10-11 13:57:06 +0200
Processing by DoctorsController#new as HTML
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 57)


Started GET "/doctors/new" for ::1 at 2023-10-11 13:57:09 +0200
Processing by DoctorsController#new as HTML
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 43)


Started GET "/doctors/new" for ::1 at 2023-10-11 13:57:15 +0200
Processing by DoctorsController#new as HTML
Completed 204 No Content in 10ms (ActiveRecord: 0.0ms | Allocations: 43)


Started GET "/doctors/1" for ::1 at 2023-10-11 13:58:36 +0200
Processing by DoctorsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.5ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:15:in `show'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.52ms)
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 775)


Started GET "/doctors/1" for ::1 at 2023-10-11 14:00:36 +0200
Processing by DoctorsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (1.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:15:in `show'
Completed 500 Internal Server Error in 46ms (ActiveRecord: 13.2ms | Allocations: 6636)


  
NoMethodError (undefined method `render_success_response' for #<DoctorsController:0x0000000000cda0>

    render_success_response(doctor)
    ^^^^^^^^^^^^^^^^^^^^^^^):
  
app/controllers/doctors_controller.rb:16:in `show'
Started GET "/doctors/new" for ::1 at 2023-10-11 14:00:42 +0200
Processing by DoctorsController#new as HTML
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 88)


Started GET "/doctors/1" for ::1 at 2023-10-11 14:05:12 +0200
Processing by DoctorsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:15:in `show'
Completed 204 No Content in 11ms (ActiveRecord: 3.6ms | Allocations: 4219)


Started GET "/doctors/1" for ::1 at 2023-10-11 14:05:13 +0200
Processing by DoctorsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:15:in `show'
Completed 204 No Content in 2ms (ActiveRecord: 0.2ms | Allocations: 495)


Started GET "/doctors/1" for ::1 at 2023-10-11 14:05:27 +0200
Processing by DoctorsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:15:in `show'
Completed 500 Internal Server Error in 33ms (ActiveRecord: 20.2ms | Allocations: 6520)


  
NoMethodError (undefined method `render_success_response' for #<DoctorsController:0x000000000147a8>

    render_success_response(doctor)
    ^^^^^^^^^^^^^^^^^^^^^^^):
  
app/controllers/doctors_controller.rb:16:in `show'
Started GET "/doctors/1" for ::1 at 2023-10-11 14:05:34 +0200
Processing by DoctorsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:15:in `show'
Completed 500 Internal Server Error in 30ms (ActiveRecord: 0.2ms | Allocations: 2732)


  
NoMethodError (undefined method `render_success_response' for #<DoctorsController:0x00000000014988>

    render_success_response(doctor)
    ^^^^^^^^^^^^^^^^^^^^^^^):
  
app/controllers/doctors_controller.rb:16:in `show'
Started GET "/doctors/1" for ::1 at 2023-10-11 14:05:44 +0200
Processing by DoctorsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:15:in `show'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.42ms)
Completed 200 OK in 11ms (Views: 2.9ms | ActiveRecord: 0.6ms | Allocations: 4815)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 14:13:26 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"12:00 PM", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:113:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 10:00:00' AND appointment_time <= '2023-10-11 10:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:91:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 422 Unprocessable Entity in 18ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 21009)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 14:13:29 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"1:00 PM", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:113:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 11:00:00' AND appointment_time <= '2023-10-11 11:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Create (1.4ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 11:00:00"], ["doctor_id", 1], ["created_at", "2023-10-11 12:13:29.855593"], ["updated_at", "2023-10-11 12:13:29.855593"]]
  â†³ app/controllers/doctors_controller.rb:91:in `book_slot'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:91:in `book_slot'
AppointmentMailer#appointment_scheduled_email: processed outbound mail in 13.8ms
Completed 500 Internal Server Error in 51ms (ActiveRecord: 3.0ms | Allocations: 25147)


  
NoMethodError (undefined method `patient_email' for #<Appointment id: 17, patient_name: "nishi", appointment_time: "2023-10-11 11:00:00.000000000 +0000", doctor_id: 1, created_at: "2023-10-11 12:13:29.855593000 +0000", updated_at: "2023-10-11 12:13:29.855593000 +0000">
Did you mean?  patient_name):
  
app/mailers/application_mailer.rb:7:in `appointment_scheduled_email'
app/controllers/doctors_controller.rb:92:in `book_slot'
Started POST "/doctors/2/book_slot" for ::1 at 2023-10-11 14:14:13 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"1:00 PM", "patient_name"=>"nishi", "id"=>"2", "doctor"=>{}}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:113:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 11:00:00' AND appointment_time <= '2023-10-11 11:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Create (4.0ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 11:00:00"], ["doctor_id", 2], ["created_at", "2023-10-11 12:14:13.425813"], ["updated_at", "2023-10-11 12:14:13.425813"]]
  â†³ app/controllers/doctors_controller.rb:91:in `book_slot'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:91:in `book_slot'
AppointmentMailer#appointment_scheduled_email: processed outbound mail in 11.3ms
Completed 500 Internal Server Error in 33ms (ActiveRecord: 5.3ms | Allocations: 12110)


  
NoMethodError (undefined method `patient_email' for #<Appointment id: 18, patient_name: "nishi", appointment_time: "2023-10-11 11:00:00.000000000 +0000", doctor_id: 2, created_at: "2023-10-11 12:14:13.425813000 +0000", updated_at: "2023-10-11 12:14:13.425813000 +0000">
Did you mean?  patient_name):
  
app/mailers/application_mailer.rb:7:in `appointment_scheduled_email'
app/controllers/doctors_controller.rb:92:in `book_slot'
Started POST "/doctors/2/book_slot" for ::1 at 2023-10-11 14:14:54 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"1:00 PM", "patient_name"=>"nishi", "id"=>"2", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:113:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 11:00:00' AND appointment_time <= '2023-10-11 11:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:91:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 422 Unprocessable Entity in 18ms (Views: 0.7ms | ActiveRecord: 1.1ms | Allocations: 10052)


Started POST "/doctors/2/book_slot" for ::1 at 2023-10-11 14:14:58 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"10:00 PM", "patient_name"=>"nishi", "id"=>"2", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:113:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 20:00:00' AND appointment_time <= '2023-10-11 20:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Create (0.3ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 20:00:00"], ["doctor_id", 2], ["created_at", "2023-10-11 12:14:59.008273"], ["updated_at", "2023-10-11 12:14:59.008273"]]
  â†³ app/controllers/doctors_controller.rb:91:in `book_slot'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:91:in `book_slot'
AppointmentMailer#appointment_scheduled_email: processed outbound mail in 13.6ms
Completed 500 Internal Server Error in 30ms (ActiveRecord: 1.2ms | Allocations: 12698)


  
NoMethodError (private method `patient_email' called for #<Appointment id: 19, patient_name: "nishi", appointment_time: "2023-10-11 20:00:00.000000000 +0000", doctor_id: 2, created_at: "2023-10-11 12:14:59.008273000 +0000", updated_at: "2023-10-11 12:14:59.008273000 +0000">
Did you mean?  patient_name):
  
app/mailers/application_mailer.rb:7:in `appointment_scheduled_email'
app/controllers/doctors_controller.rb:92:in `book_slot'
Started POST "/doctors/2/book_slot" for ::1 at 2023-10-11 14:15:54 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"10:00 PM", "patient_name"=>"nishi", "id"=>"2", "doctor"=>{}}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:111:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 20:00:00' AND appointment_time <= '2023-10-11 20:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:91:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (2.99ms)
Completed 422 Unprocessable Entity in 62ms (Views: 3.3ms | ActiveRecord: 1.6ms | Allocations: 9925)


Started POST "/doctors/2/book_slot" for ::1 at 2023-10-11 14:15:58 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"12:00 PM", "patient_name"=>"nishi", "id"=>"2", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:111:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 10:00:00' AND appointment_time <= '2023-10-11 10:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 2], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Create (0.2ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 10:00:00"], ["doctor_id", 2], ["created_at", "2023-10-11 12:15:58.471383"], ["updated_at", "2023-10-11 12:15:58.471383"]]
  â†³ app/controllers/doctors_controller.rb:91:in `book_slot'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:91:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 201 Created in 7ms (Views: 0.3ms | ActiveRecord: 1.4ms | Allocations: 5312)


  [1m[36mDoctor Load (5.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAvailability Load (0.1ms)[0m  [1m[34mSELECT "availabilities".* FROM "availabilities" WHERE "availabilities"."doctor_id" = ?[0m  [["doctor_id", 4]]
  [1m[36mAppointment Load (0.9ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 17:43:48 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"2:10pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:93:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 12:00:00' AND appointment_time <= '2023-10-11 12:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:71:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.67ms)
Completed 200 OK in 23ms (Views: 3.0ms | ActiveRecord: 1.0ms | Allocations: 20942)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 17:44:24 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"2:10pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (1.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:93:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 12:00:00' AND appointment_time <= '2023-10-11 12:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:71:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 36ms (Views: 0.5ms | ActiveRecord: 5.5ms | Allocations: 10179)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 17:44:35 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"13:10pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:93:in `set_doctor'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 11:00:00' AND appointment_time <= '2023-10-11 11:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:71:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.26ms)
Completed 200 OK in 35ms (Views: 3.1ms | ActiveRecord: 0.8ms | Allocations: 4534)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 17:44:56 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"13:10pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (2.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:93:in `set_doctor'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 11:00:00' AND appointment_time <= '2023-10-11 11:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ (pry):5:in `book_slot'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 11:00:00' AND appointment_time <= '2023-10-11 11:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ (pry):6:in `book_slot'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 11:00:00' AND appointment_time <= '2023-10-11 11:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:71:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 30332ms (Views: 0.8ms | ActiveRecord: 8.1ms | Allocations: 47784)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-11 17:45:35 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"9pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.5ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:93:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 19:00:00' AND appointment_time <= '2023-10-11 19:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:71:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 2762ms (Views: 0.6ms | ActiveRecord: 1.0ms | Allocations: 12961)


  [1m[36mAppointment Load (7.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
Started POST "/doctors/4/book_slot" for ::1 at 2023-10-11 17:46:41 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"9pm", "patient_name"=>"nishi", "id"=>"4", "doctor"=>{}}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:92:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 19:00:00' AND appointment_time <= '2023-10-11 19:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 4], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Create (1.7ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 19:00:00"], ["doctor_id", 4], ["created_at", "2023-10-11 15:46:41.813277"], ["updated_at", "2023-10-11 15:46:41.813277"]]
  â†³ app/controllers/doctors_controller.rb:70:in `book_slot'
  [1m[36mTRANSACTION (3.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:70:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 23ms (Views: 0.8ms | ActiveRecord: 7.2ms | Allocations: 10774)


  [1m[36mAppointment Load (3.9ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
Started POST "/doctors/4/book_slot" for ::1 at 2023-10-11 17:48:35 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"9:10pm", "patient_name"=>"nishi", "id"=>"4", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:92:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 19:00:00' AND appointment_time <= '2023-10-11 19:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 4], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:70:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 20ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 4528)


  [1m[36mDoctor Load (0.6ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAppointment Load (0.4ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."doctor_id" = ?[0m  [["doctor_id", 4]]
Started POST "/doctors/4/book_slot" for ::1 at 2023-10-11 17:51:19 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"9:10pm", "patient_name"=>"nishi", "id"=>"4", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:93:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 19:00:00' AND appointment_time <= '2023-10-11 19:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 4], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:71:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.38ms)
Completed 422 Unprocessable Entity in 165ms (Views: 155.4ms | ActiveRecord: 2.1ms | Allocations: 9846)


Started POST "/doctors/4/book_slot" for ::1 at 2023-10-11 17:51:39 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"21:00pm", "patient_name"=>"nishi", "id"=>"4", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:93:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 19:00:00' AND appointment_time <= '2023-10-11 19:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 4], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:71:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.21ms)
Completed 422 Unprocessable Entity in 15ms (Views: 1.7ms | ActiveRecord: 0.4ms | Allocations: 4600)


Started POST "/doctors/4/book_slot" for ::1 at 2023-10-11 17:51:42 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"22:00pm", "patient_name"=>"nishi", "id"=>"4", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:93:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 20:00:00' AND appointment_time <= '2023-10-11 20:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 4], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Create (5.8ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 20:00:00"], ["doctor_id", 4], ["created_at", "2023-10-11 15:51:42.868547"], ["updated_at", "2023-10-11 15:51:42.868547"]]
  â†³ app/controllers/doctors_controller.rb:71:in `book_slot'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:71:in `book_slot'
Completed 500 Internal Server Error in 69ms (ActiveRecord: 9.0ms | Allocations: 7895)


  
NameError (undefined local variable or method `available_slots' for #<DoctorsController:0x00000000017ca0>

      render_success_response({ availabilities: available_slots })
                                                ^^^^^^^^^^^^^^^
Did you mean?  available_action?):
  
app/controllers/doctors_controller.rb:72:in `book_slot'
Started POST "/doctors/4/book_slot" for ::1 at 2023-10-11 17:51:54 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"22:00pm", "patient_name"=>"nishi", "id"=>"4", "doctor"=>{}}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:93:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (3.5ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 20:00:00' AND appointment_time <= '2023-10-11 20:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 4], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:71:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 422 Unprocessable Entity in 16ms (Views: 0.9ms | ActiveRecord: 5.5ms | Allocations: 9918)


  [1m[36mDoctor Load (9.7ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAppointment Load (2.9ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."doctor_id" = ?[0m  [["doctor_id", 4]]
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."doctor_id" = ?[0m  [["doctor_id", 4]]
  [1m[36mDoctor Load (0.6ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mAppointment Load (0.1ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."doctor_id" = ?[0m  [["doctor_id", 4]]
Started POST "/doctors/4/book_slot" for ::1 at 2023-10-11 17:55:34 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"22:10pm", "patient_name"=>"nishi", "id"=>"4", "doctor"=>{}}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:92:in `set_doctor'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mbegin transaction[0m
  â†³ (pry):12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 20:00:00' AND appointment_time <= '2023-10-11 20:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 4], ["LIMIT", 1]]
  â†³ (pry):12:in `check_overlapping_appointments'
  [1m[36mCACHE Appointment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 20:00:00' AND appointment_time <= '2023-10-11 20:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 4], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:70:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.74ms)
Completed 200 OK in 165953ms (Views: 2.4ms | ActiveRecord: 2.5ms | Allocations: 28757)


Started POST "/doctors/4/book_slot" for ::1 at 2023-10-11 17:58:25 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"23:10pm", "patient_name"=>"nishi", "id"=>"4", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:92:in `set_doctor'
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[36mbegin transaction[0m
  â†³ (pry):16:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 21:00:00' AND appointment_time <= '2023-10-11 21:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 4], ["LIMIT", 1]]
  â†³ (pry):16:in `check_overlapping_appointments'
  [1m[36mCACHE Appointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-11 21:00:00' AND appointment_time <= '2023-10-11 21:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 4], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Create (11.4ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-11 21:10:00"], ["doctor_id", 4], ["created_at", "2023-10-11 15:58:36.503782"], ["updated_at", "2023-10-11 15:58:36.503782"]]
  â†³ app/controllers/doctors_controller.rb:70:in `book_slot'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:70:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.79ms)
Completed 200 OK in 10679ms (Views: 2.5ms | ActiveRecord: 16.2ms | Allocations: 14402)


  [1m[36mDoctor Load (2.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  [1m[36mDoctor Load (0.5ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
Started GET "/doctors" for ::1 at 2023-10-12 15:41:55 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DoctorsController#index as */*
[active_model_serializers]   [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
[active_model_serializers]   â†³ app/controllers/application_controller.rb:16:in `json_response'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (3.92ms)
Completed 200 OK in 11ms (Views: 4.4ms | ActiveRecord: 0.3ms | Allocations: 12366)


Started GET "/doctors/1" for ::1 at 2023-10-12 15:42:52 +0200
Processing by DoctorsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:11:in `show'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (2.59ms)
Completed 200 OK in 16ms (Views: 4.1ms | ActiveRecord: 0.3ms | Allocations: 2763)


Started GET "/doctors/1" for ::1 at 2023-10-12 15:43:18 +0200
Processing by DoctorsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:11:in `show'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.31ms)
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 780)


Started PUT "/doctors" for ::1 at 2023-10-12 15:44:37 +0200
  
ActionController::RoutingError (No route matches [PUT] "/doctors"):
  
Started POST "/doctors" for ::1 at 2023-10-12 15:44:42 +0200
Processing by DoctorsController#create as */*
  Parameters: {"name"=>"DR.Sunil", "Speciality"=>"nuerologist", "doctor"=>{"name"=>"DR.Sunil"}}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/doctors_controller.rb:16:in `create'
  [1m[36mDoctor Create (2.1ms)[0m  [1m[32mINSERT INTO "doctors" ("name", "specialty", "created_at", "updated_at", "working_hours") VALUES (?, ?, ?, ?, ?)[0m  [["name", "DR.Sunil"], ["specialty", nil], ["created_at", "2023-10-12 13:44:42.583917"], ["updated_at", "2023-10-12 13:44:42.583917"], ["working_hours", nil]]
  â†³ app/controllers/doctors_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:16:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 19ms (Views: 0.6ms | ActiveRecord: 3.8ms | Allocations: 2765)


Started POST "/doctors" for ::1 at 2023-10-12 15:45:22 +0200
Processing by DoctorsController#create as */*
  Parameters: {"name"=>"DR.Sunil", "Speciality"=>"nuerologist", "working_hours"=>{"monday"=>"9:00 AM - 5:00 PM", "tuesday"=>"10:00 AM - 6:00 PM", "wednesday"=>"8:00 AM - 4:00 PM", "thursday"=>"8:30 AM - 5:30 PM", "friday"=>"8:30 AM - 4:30 PM", "saturday"=>"9:00 AM - 1:00 PM", "sunday"=>"Holiday"}, "doctor"=>{"name"=>"DR.Sunil", "working_hours"=>{"monday"=>"9:00 AM - 5:00 PM", "tuesday"=>"10:00 AM - 6:00 PM", "wednesday"=>"8:00 AM - 4:00 PM", "thursday"=>"8:30 AM - 5:30 PM", "friday"=>"8:30 AM - 4:30 PM", "saturday"=>"9:00 AM - 1:00 PM", "sunday"=>"Holiday"}}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/doctors_controller.rb:16:in `create'
  [1m[36mDoctor Create (0.4ms)[0m  [1m[32mINSERT INTO "doctors" ("name", "specialty", "created_at", "updated_at", "working_hours") VALUES (?, ?, ?, ?, ?)[0m  [["name", "DR.Sunil"], ["specialty", nil], ["created_at", "2023-10-12 13:45:22.833804"], ["updated_at", "2023-10-12 13:45:22.833804"], ["working_hours", "{\"monday\":\"9:00 AM - 5:00 PM\",\"tuesday\":\"10:00 AM - 6:00 PM\",\"wednesday\":\"8:00 AM - 4:00 PM\",\"thursday\":\"8:30 AM - 5:30 PM\",\"friday\":\"8:30 AM - 4:30 PM\",\"saturday\":\"9:00 AM - 1:00 PM\",\"sunday\":\"Holiday\"}"]]
  â†³ app/controllers/doctors_controller.rb:16:in `create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:16:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.25ms)
Completed 200 OK in 34ms (Views: 0.5ms | ActiveRecord: 1.8ms | Allocations: 2476)


Started POST "/doctors" for ::1 at 2023-10-12 15:45:34 +0200
Processing by DoctorsController#create as */*
  Parameters: {"name"=>"DR.Sunil", "Speciality"=>"nuerologist", "working_hours"=>{"monday"=>"9:00 AM - 5:00 PM", "tuesday"=>"10:00 AM - 6:00 PM", "wednesday"=>"8:00 AM - 4:00 PM", "thursday"=>"8:30 AM - 5:30 PM", "friday"=>"8:30 AM - 4:30 PM", "saturday"=>"9:00 AM - 1:00 PM", "sunday"=>"Holiday"}, "doctor"=>{"name"=>"DR.Sunil", "working_hours"=>{"monday"=>"9:00 AM - 5:00 PM", "tuesday"=>"10:00 AM - 6:00 PM", "wednesday"=>"8:00 AM - 4:00 PM", "thursday"=>"8:30 AM - 5:30 PM", "friday"=>"8:30 AM - 4:30 PM", "saturday"=>"9:00 AM - 1:00 PM", "sunday"=>"Holiday"}}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/doctors_controller.rb:16:in `create'
  [1m[36mDoctor Create (0.3ms)[0m  [1m[32mINSERT INTO "doctors" ("name", "specialty", "created_at", "updated_at", "working_hours") VALUES (?, ?, ?, ?, ?)[0m  [["name", "DR.Sunil"], ["specialty", nil], ["created_at", "2023-10-12 13:45:34.163606"], ["updated_at", "2023-10-12 13:45:34.163606"], ["working_hours", "{\"monday\":\"9:00 AM - 5:00 PM\",\"tuesday\":\"10:00 AM - 6:00 PM\",\"wednesday\":\"8:00 AM - 4:00 PM\",\"thursday\":\"8:30 AM - 5:30 PM\",\"friday\":\"8:30 AM - 4:30 PM\",\"saturday\":\"9:00 AM - 1:00 PM\",\"sunday\":\"Holiday\"}"]]
  â†³ app/controllers/doctors_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:16:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.31ms)
Completed 200 OK in 53ms (Views: 0.7ms | ActiveRecord: 1.0ms | Allocations: 2456)


Started GET "/doctors/1/working_hours" for ::1 at 2023-10-12 15:46:19 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:90:in `set_doctor'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.0ms)
Completed 200 OK in 9ms (Views: 1.7ms | ActiveRecord: 0.2ms | Allocations: 666)


Started GET "/doctors/4/working_hours" for ::1 at 2023-10-12 15:46:24 +0200
Processing by DoctorsController#working_hours as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:90:in `set_doctor'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.65ms)
Completed 200 OK in 6ms (Views: 1.0ms | ActiveRecord: 0.4ms | Allocations: 751)


Started GET "/doctors/4/availability" for ::1 at 2023-10-12 15:47:04 +0200
Processing by DoctorsController#availability as */*
  Parameters: {"id"=>"4"}
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:90:in `set_doctor'
  [1m[36mCACHE Doctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:30:in `availability'
  [1m[36mAppointment Pluck (0.4ms)[0m  [1m[34mSELECT "appointments"."appointment_time" FROM "appointments" WHERE "appointments"."doctor_id" = ?[0m  [["doctor_id", 4]]
  â†³ app/controllers/doctors_controller.rb:31:in `availability'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.73ms)
Completed 200 OK in 107ms (Views: 1.2ms | ActiveRecord: 3.0ms | Allocations: 10690)


Started PUT "/doctors/1/book_slot" for ::1 at 2023-10-12 15:48:01 +0200
  
ActionController::RoutingError (No route matches [PUT] "/doctors/1/book_slot"):
  
Started POST "/doctors/1/book_slot" for ::1 at 2023-10-12 15:48:05 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"23:10pm", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:90:in `set_doctor'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 21:00:00' AND appointment_time <= '2023-10-12 21:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Create (0.5ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-12 21:10:00"], ["doctor_id", 1], ["created_at", "2023-10-12 13:48:32.749990"], ["updated_at", "2023-10-12 13:48:32.749990"]]
  â†³ app/controllers/doctors_controller.rb:70:in `book_slot'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:70:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.81ms)
Completed 200 OK in 26807ms (Views: 6.3ms | ActiveRecord: 3.2ms | Allocations: 30967)


Started POST "/appointments/3" for ::1 at 2023-10-12 15:49:55 +0200
  
ActionController::RoutingError (No route matches [POST] "/appointments/3"):
  
Started PATCH "/appointments/3" for ::1 at 2023-10-12 15:49:59 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"doctor_id"=>3, "patient_name"=>"supri", "appointment_time"=>"09-10-2023 3:00", "id"=>"3", "appointment"=>{"patient_name"=>"supri", "appointment_time"=>"09-10-2023 3:00", "doctor_id"=>3}}
  [1m[36mAppointment Load (0.0ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
[31mUnpermitted parameter: :doctor_id. Context: { controller: AppointmentsController, action: update, request: #<ActionDispatch::Request:0x000000010aeb8c18>, params: {"doctor_id"=>3, "patient_name"=>"supri", "appointment_time"=>"09-10-2023 3:00", "controller"=>"appointments", "action"=>"update", "id"=>"3", "appointment"=>{"patient_name"=>"supri", "appointment_time"=>"09-10-2023 3:00", "doctor_id"=>3}} }[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-09 01:00:00' AND appointment_time <= '2023-10-09 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 3], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Update (0.5ms)[0m  [1m[33mUPDATE "appointments" SET "appointment_time" = ?, "updated_at" = ? WHERE "appointments"."id" = ?[0m  [["appointment_time", "2023-10-09 01:00:00"], ["updated_at", "2023-10-12 13:49:59.486451"], ["id", 3]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.22ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (2.02ms)
Completed 200 OK in 16ms (Views: 2.4ms | ActiveRecord: 2.6ms | Allocations: 11710)


Started PATCH "/appointments/3" for ::1 at 2023-10-12 15:50:05 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"doctor_id"=>3, "patient_name"=>"supri", "appointment_time"=>"09-10-2023 3:00", "id"=>"3", "appointment"=>{"patient_name"=>"supri", "appointment_time"=>"09-10-2023 3:00", "doctor_id"=>3}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
[31mUnpermitted parameter: :doctor_id. Context: { controller: AppointmentsController, action: update, request: #<ActionDispatch::Request:0x000000010b002380>, params: {"doctor_id"=>3, "patient_name"=>"supri", "appointment_time"=>"09-10-2023 3:00", "controller"=>"appointments", "action"=>"update", "id"=>"3", "appointment"=>{"patient_name"=>"supri", "appointment_time"=>"09-10-2023 3:00", "doctor_id"=>3}} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-09 01:00:00' AND appointment_time <= '2023-10-09 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 3], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.26ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.7ms)
Completed 200 OK in 10ms (Views: 1.1ms | ActiveRecord: 0.6ms | Allocations: 4051)


Started PATCH "/appointments/3" for ::1 at 2023-10-12 15:50:18 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"doctor_id"=>3, "patient_name"=>"shi", "appointment_time"=>"09-10-2023 3:00", "id"=>"3", "appointment"=>{"patient_name"=>"shi", "appointment_time"=>"09-10-2023 3:00", "doctor_id"=>3}}
  [1m[36mAppointment Load (0.1ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
[31mUnpermitted parameter: :doctor_id. Context: { controller: AppointmentsController, action: update, request: #<ActionDispatch::Request:0x000000010b06a598>, params: {"doctor_id"=>3, "patient_name"=>"shi", "appointment_time"=>"09-10-2023 3:00", "controller"=>"appointments", "action"=>"update", "id"=>"3", "appointment"=>{"patient_name"=>"shi", "appointment_time"=>"09-10-2023 3:00", "doctor_id"=>3}} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-09 01:00:00' AND appointment_time <= '2023-10-09 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 3], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Update (0.4ms)[0m  [1m[33mUPDATE "appointments" SET "patient_name" = ?, "updated_at" = ? WHERE "appointments"."id" = ?[0m  [["patient_name", "shi"], ["updated_at", "2023-10-12 13:50:18.805417"], ["id", 3]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.24ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.55ms)
Completed 200 OK in 10ms (Views: 0.9ms | ActiveRecord: 1.6ms | Allocations: 4378)


Started POST "/doctors/1/book_slot" for ::1 at 2023-10-12 15:50:41 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"09-10-2023 3:00", "patient_name"=>"nishi", "id"=>"1", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:90:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-09-10 13:00:00' AND appointment_time <= '2023-09-10 13:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 1], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Create (0.6ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-09-10 13:00:00"], ["doctor_id", 1], ["created_at", "2023-10-12 13:50:41.406390"], ["updated_at", "2023-10-12 13:50:41.406390"]]
  â†³ app/controllers/doctors_controller.rb:70:in `book_slot'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:70:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.3ms)
Completed 200 OK in 12ms (Views: 0.7ms | ActiveRecord: 1.3ms | Allocations: 5600)


Started PUT "/appointments/3" for ::1 at 2023-10-12 15:51:06 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"doctor_id"=>3, "patient_name"=>"shi", "appointment_time"=>"09-10-2023 3:00", "id"=>"3", "appointment"=>{"patient_name"=>"shi", "appointment_time"=>"09-10-2023 3:00", "doctor_id"=>3}}
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
[31mUnpermitted parameter: :doctor_id. Context: { controller: AppointmentsController, action: update, request: #<ActionDispatch::Request:0x000000010b182f48>, params: {"doctor_id"=>3, "patient_name"=>"shi", "appointment_time"=>"09-10-2023 3:00", "controller"=>"appointments", "action"=>"update", "id"=>"3", "appointment"=>{"patient_name"=>"shi", "appointment_time"=>"09-10-2023 3:00", "doctor_id"=>3}} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-09 01:00:00' AND appointment_time <= '2023-10-09 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 3], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.39ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.89ms)
Completed 200 OK in 10ms (Views: 1.6ms | ActiveRecord: 0.5ms | Allocations: 3786)


Started POST "/doctors/3/book_slot" for ::1 at 2023-10-12 15:51:15 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"09-10-2023 3:00", "patient_name"=>"nishi", "id"=>"3", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:90:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-09-10 13:00:00' AND appointment_time <= '2023-09-10 13:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 3], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Create (0.5ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-09-10 13:00:00"], ["doctor_id", 3], ["created_at", "2023-10-12 13:51:15.403982"], ["updated_at", "2023-10-12 13:51:15.403982"]]
  â†³ app/controllers/doctors_controller.rb:70:in `book_slot'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:70:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 10ms (Views: 0.5ms | ActiveRecord: 1.7ms | Allocations: 4617)


Started POST "/doctors/3/book_slot" for ::1 at 2023-10-12 15:51:36 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"3:00", "patient_name"=>"nishi", "id"=>"3", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:90:in `set_doctor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 13:00:00' AND appointment_time <= '2023-10-12 13:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 3], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Create (0.5ms)[0m  [1m[32mINSERT INTO "appointments" ("patient_name", "appointment_time", "doctor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["patient_name", "nishi"], ["appointment_time", "2023-10-12 13:00:00"], ["doctor_id", 3], ["created_at", "2023-10-12 13:51:36.783392"], ["updated_at", "2023-10-12 13:51:36.783392"]]
  â†³ app/controllers/doctors_controller.rb:70:in `book_slot'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/doctors_controller.rb:70:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 11ms (Views: 0.4ms | ActiveRecord: 2.1ms | Allocations: 4957)


Started DELETE "/appointments/2" for ::1 at 2023-10-12 15:52:47 +0200
Processing by AppointmentsController#destroy as */*
  Parameters: {"appointment_time"=>"6pm", "id"=>"2", "appointment"=>{"appointment_time"=>"6pm"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
Completed 404 Not Found in 7ms (ActiveRecord: 0.2ms | Allocations: 553)


  
ActiveRecord::RecordNotFound (Couldn't find Appointment with 'id'=2):
  
app/controllers/appointments_controller.rb:27:in `set_appointment'
Started DELETE "/appointments/3" for ::1 at 2023-10-12 15:52:52 +0200
Processing by AppointmentsController#destroy as */*
  Parameters: {"appointment_time"=>"6pm", "id"=>"3", "appointment"=>{"appointment_time"=>"6pm"}}
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `destroy'
  [1m[36mAppointment Destroy (0.8ms)[0m  [1m[31mDELETE FROM "appointments" WHERE "appointments"."id" = ?[0m  [["id", 3]]
  â†³ app/controllers/appointments_controller.rb:17:in `destroy'
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `destroy'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 25ms (Views: 0.7ms | ActiveRecord: 3.6ms | Allocations: 4542)


Started DELETE "/appointments/3" for ::1 at 2023-10-12 15:53:06 +0200
Processing by AppointmentsController#destroy as */*
  Parameters: {"appointment_time"=>"6pm", "id"=>"3", "appointment"=>{"appointment_time"=>"6pm"}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
Completed 404 Not Found in 1ms (ActiveRecord: 1.3ms | Allocations: 1086)


  
ActiveRecord::RecordNotFound (Couldn't find Appointment with 'id'=3):
  
app/controllers/appointments_controller.rb:27:in `set_appointment'
Started DELETE "/appointments/4" for ::1 at 2023-10-12 15:53:10 +0200
Processing by AppointmentsController#destroy as */*
  Parameters: {"appointment_time"=>"6pm", "id"=>"4", "appointment"=>{"appointment_time"=>"6pm"}}
  [1m[36mAppointment Load (0.1ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `destroy'
  [1m[36mAppointment Destroy (0.5ms)[0m  [1m[31mDELETE FROM "appointments" WHERE "appointments"."id" = ?[0m  [["id", 4]]
  â†³ app/controllers/appointments_controller.rb:17:in `destroy'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:17:in `destroy'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.58ms)
Completed 200 OK in 9ms (Views: 1.5ms | ActiveRecord: 1.3ms | Allocations: 3844)


Started POST "/doctors/3/book_slot" for ::1 at 2023-10-12 15:53:37 +0200
Processing by DoctorsController#book_slot as */*
  Parameters: {"appointment_time"=>"3:00", "patient_name"=>"nishi", "id"=>"3", "doctor"=>{}}
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:90:in `set_doctor'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 13:00:00' AND appointment_time <= '2023-10-12 13:59:59.999999') AND "appointments"."id" IS NOT NULL LIMIT ?[0m  [["doctor_id", 3], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/doctors_controller.rb:70:in `book_slot'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 11ms (Views: 0.4ms | ActiveRecord: 2.2ms | Allocations: 9731)


  [1m[36mDoctor Load (1.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mDoctor Load (0.5ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAvailability Load (0.1ms)[0m  [1m[34mSELECT "availabilities".* FROM "availabilities" WHERE "availabilities"."doctor_id" = ?[0m  [["doctor_id", 3]]
  [1m[36mDoctor Load (0.5ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAppointment Load (0.8ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."doctor_id" = ?[0m  [["doctor_id", 3]]
Started PUT "/appointments/3" for ::1 at 2023-10-12 15:56:57 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"doctor_id"=>3, "patient_name"=>"shi", "appointment_time"=>"3:00", "id"=>"3", "appointment"=>{"patient_name"=>"shi", "appointment_time"=>"3:00", "doctor_id"=>3}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
Completed 404 Not Found in 5ms (ActiveRecord: 0.2ms | Allocations: 864)


  
ActiveRecord::RecordNotFound (Couldn't find Appointment with 'id'=3):
  
app/controllers/appointments_controller.rb:27:in `set_appointment'
  [1m[36mAppointment Load (0.5ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
Started PUT "/appointments/7" for ::1 at 2023-10-12 15:58:06 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"doctor_id"=>3, "patient_name"=>"shi", "appointment_time"=>"3:00", "id"=>"7", "appointment"=>{"patient_name"=>"shi", "appointment_time"=>"3:00", "doctor_id"=>3}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
[31mUnpermitted parameter: :doctor_id. Context: { controller: AppointmentsController, action: update, request: #<ActionDispatch::Request:0x000000010b1401c0>, params: {"doctor_id"=>3, "patient_name"=>"shi", "appointment_time"=>"3:00", "controller"=>"appointments", "action"=>"update", "id"=>"7", "appointment"=>{"patient_name"=>"shi", "appointment_time"=>"3:00", "doctor_id"=>3}} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mAppointment Update (0.3ms)[0m  [1m[33mUPDATE "appointments" SET "patient_name" = ?, "appointment_time" = ?, "updated_at" = ? WHERE "appointments"."id" = ?[0m  [["patient_name", "shi"], ["appointment_time", "2023-10-12 01:00:00"], ["updated_at", "2023-10-12 13:58:06.202473"], ["id", 7]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.29ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.68ms)
Completed 200 OK in 38ms (Views: 1.5ms | ActiveRecord: 2.3ms | Allocations: 6289)


Started PUT "/appointments/7" for ::1 at 2023-10-12 16:00:08 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"doctor_id"=>3, "patient_name"=>"shi", "appointment_time"=>"3:00", "id"=>"7", "appointment"=>{"patient_name"=>"shi", "appointment_time"=>"3:00", "doctor_id"=>3}}
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
[31mUnpermitted parameter: :doctor_id. Context: { controller: AppointmentsController, action: update, request: #<ActionDispatch::Request:0x000000010b319a00>, params: {"doctor_id"=>3, "patient_name"=>"shi", "appointment_time"=>"3:00", "controller"=>"appointments", "action"=>"update", "id"=>"7", "appointment"=>{"patient_name"=>"shi", "appointment_time"=>"3:00", "doctor_id"=>3}} }[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mCACHE Appointment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.1ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.24ms)
Completed 200 OK in 10ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 10468)


Started PUT "/appointments/7" for ::1 at 2023-10-12 16:00:17 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}}
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
[31mUnpermitted parameter: :doctor_id. Context: { controller: AppointmentsController, action: update, request: #<ActionDispatch::Request:0x000000010b4a0158>, params: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "controller"=>"appointments", "action"=>"update", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mCACHE Appointment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mAppointment Update (0.3ms)[0m  [1m[33mUPDATE "appointments" SET "patient_name" = ?, "updated_at" = ? WHERE "appointments"."id" = ?[0m  [["patient_name", "shiq"], ["updated_at", "2023-10-12 14:00:17.062965"], ["id", 7]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.11ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.24ms)
Completed 200 OK in 28ms (Views: 0.5ms | ActiveRecord: 2.1ms | Allocations: 5255)


  [1m[36mDoctor Load (1.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAvailability Load (0.1ms)[0m  [1m[34mSELECT "availabilities".* FROM "availabilities" WHERE "availabilities"."doctor_id" = ?[0m  [["doctor_id", 3]]
  [1m[36mDoctor Load (0.9ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."doctor_id" = ?[0m  [["doctor_id", 3]]
  [1m[36mDoctor Load (0.7ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAppointment Load (0.1ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."doctor_id" = ?[0m  [["doctor_id", 3]]
Started PUT "/appointments/7" for ::1 at 2023-10-12 16:01:54 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}}
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
[31mUnpermitted parameter: :doctor_id. Context: { controller: AppointmentsController, action: update, request: #<ActionDispatch::Request:0x000000010a6f3c80>, params: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "controller"=>"appointments", "action"=>"update", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}} }[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mCACHE Appointment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.1ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.25ms)
Completed 200 OK in 12ms (Views: 0.8ms | ActiveRecord: 1.0ms | Allocations: 10489)


Started PATCH "/appointments/7" for ::1 at 2023-10-12 16:01:59 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}}
  [1m[36mAppointment Load (0.1ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
[31mUnpermitted parameter: :doctor_id. Context: { controller: AppointmentsController, action: update, request: #<ActionDispatch::Request:0x000000010a9a3020>, params: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "controller"=>"appointments", "action"=>"update", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}} }[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mCACHE Appointment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:12:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.21ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.49ms)
Completed 200 OK in 12ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 4592)


  [1m[36mDoctor Load (1.1ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAppointment Load (0.1ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."doctor_id" = ?[0m  [["doctor_id", 3]]
  [1m[36mAppointment Load (0.2ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments"[0m
Started PATCH "/appointments/7" for ::1 at 2023-10-12 16:03:40 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}}
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
[31mUnpermitted parameter: :doctor_id. Context: { controller: AppointmentsController, action: update, request: #<ActionDispatch::Request:0x000000010addb458>, params: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "controller"=>"appointments", "action"=>"update", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}} }[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:13:in `check_overlapping_appointments'
  [1m[36mCACHE Appointment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:13:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
Completed 500 Internal Server Error in 42ms (ActiveRecord: 1.0ms | Allocations: 15393)


  
NameError (undefined local variable or method `end_time' for #<Appointment id: 7, patient_name: "shiq", appointment_time: "2023-10-12 03:00:00.000000000 +0200", doctor_id: 1, created_at: "2023-10-11 12:00:10.510463000 +0200", updated_at: "2023-10-12 16:00:17.062965000 +0200">):
  
app/models/appointment.rb:26:in `update_doctor_schedule'
app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddEndTimeToAppointments (20231012140430)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "appointments" ADD "end_time" datetime(6)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20231012140430"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started PATCH "/appointments/7" for ::1 at 2023-10-12 16:04:40 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AppointmentsController#update as */*
  Parameters: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}}
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
[31mUnpermitted parameter: :doctor_id. Context: { controller: AppointmentsController, action: update, request: #<ActionDispatch::Request:0x0000000105957008>, params: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "controller"=>"appointments", "action"=>"update", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}} }[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:13:in `check_overlapping_appointments'
  [1m[36mCACHE Appointment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:13:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
Completed 500 Internal Server Error in 37ms (ActiveRecord: 2.7ms | Allocations: 24972)


  
NameError (undefined local variable or method `schedule' for #<Doctor id: 1, name: "Dr.smirt", specialty: "ENT", created_at: "2023-10-11 11:07:28.141538000 +0200", updated_at: "2023-10-11 11:07:28.141538000 +0200", working_hours: nil>):
  
app/models/doctor.rb:7:in `update_schedule'
app/models/appointment.rb:26:in `update_doctor_schedule'
app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddScheduleToDoctors (20231012140459)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "doctors" ADD "schedule" json[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20231012140459"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started PATCH "/appointments/7" for ::1 at 2023-10-12 16:05:07 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AppointmentsController#update as */*
  Parameters: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}}
  [1m[36mAppointment Load (0.1ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
[31mUnpermitted parameter: :doctor_id. Context: { controller: AppointmentsController, action: update, request: #<ActionDispatch::Request:0x000000010a4e8d50>, params: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "controller"=>"appointments", "action"=>"update", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}} }[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:13:in `check_overlapping_appointments'
  [1m[36mCACHE Appointment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:13:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.7ms | Allocations: 20778)


  
NoMethodError (undefined method `strftime' for nil:NilClass

    appointment_slot = "#{appointment_start_time.strftime('%H:%M')}-#{appointment_end_time.strftime('%H:%M')}"
                                                                                          ^^^^^^^^^):
  
app/models/doctor.rb:10:in `update_schedule'
app/models/appointment.rb:26:in `update_doctor_schedule'
app/controllers/appointments_controller.rb:6:in `update'
Started PATCH "/appointments/7" for ::1 at 2023-10-12 16:05:41 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}}
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
[31mUnpermitted parameter: :doctor_id. Context: { controller: AppointmentsController, action: update, request: #<ActionDispatch::Request:0x000000010d117e58>, params: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "controller"=>"appointments", "action"=>"update", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}} }[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 1.2ms | Allocations: 3238)


  
SyntaxError (/Users/enercentadmin/Desktop/doctor_scheduling_system/app/models/doctor.rb:10: syntax error, unexpected ')', expecting '}'
...t_time}-#{appointment_end_time)}"
...                              ^
/Users/enercentadmin/Desktop/doctor_scheduling_system/app/models/doctor.rb:16: unterminated string meets end of file
/Users/enercentadmin/Desktop/doctor_scheduling_system/app/models/doctor.rb:16: syntax error, unexpected end-of-input, expecting '}'):
  
app/models/doctor.rb:10: syntax error, unexpected ')', expecting '}'
app/models/doctor.rb:16: unterminated string meets end of file
app/models/doctor.rb:16: syntax error, unexpected end-of-input, expecting '}'
app/models/doctor.rb:10: syntax error, unexpected ')', expecting '}'
app/models/doctor.rb:16: unterminated string meets end of file
app/models/doctor.rb:16: syntax error, unexpected end-of-input, expecting '}'
app/controllers/appointments_controller.rb:6:in `update'
Started PATCH "/appointments/7" for ::1 at 2023-10-12 16:05:49 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}}
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
[31mUnpermitted parameter: :doctor_id. Context: { controller: AppointmentsController, action: update, request: #<ActionDispatch::Request:0x000000010c68d190>, params: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "controller"=>"appointments", "action"=>"update", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}} }[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:13:in `check_overlapping_appointments'
  [1m[36mCACHE Appointment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:13:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.9ms | Allocations: 11088)


  
NoMethodError (undefined method `delete' for nil:NilClass

    updated_schedule.delete(appointment_slot)
                    ^^^^^^^):
  
app/models/doctor.rb:11:in `update_schedule'
app/models/appointment.rb:26:in `update_doctor_schedule'
app/controllers/appointments_controller.rb:6:in `update'
Started PATCH "/appointments/7" for ::1 at 2023-10-12 16:06:18 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}}
  [1m[36mAppointment Load (0.4ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
[31mUnpermitted parameter: :doctor_id. Context: { controller: AppointmentsController, action: update, request: #<ActionDispatch::Request:0x0000000104b85808>, params: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "controller"=>"appointments", "action"=>"update", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}} }[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:13:in `check_overlapping_appointments'
  [1m[36mCACHE Appointment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:13:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
Completed 500 Internal Server Error in 15ms (ActiveRecord: 2.5ms | Allocations: 11054)


  
NoMethodError (undefined method `delete' for nil:NilClass

    updated_schedule.delete(appointment_slot)
                    ^^^^^^^):
  
app/models/doctor.rb:13:in `update_schedule'
app/models/appointment.rb:26:in `update_doctor_schedule'
app/controllers/appointments_controller.rb:6:in `update'
Started PATCH "/appointments/7" for ::1 at 2023-10-12 16:06:38 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}}
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
[31mUnpermitted parameter: :doctor_id. Context: { controller: AppointmentsController, action: update, request: #<ActionDispatch::Request:0x000000010c6d6750>, params: {"doctor_id"=>3, "patient_name"=>"shiq", "appointment_time"=>"3:00", "controller"=>"appointments", "action"=>"update", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00", "doctor_id"=>3}} }[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:13:in `check_overlapping_appointments'
  [1m[36mCACHE Appointment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:13:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.15ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (2.26ms)
Completed 200 OK in 20ms (Views: 3.1ms | ActiveRecord: 1.5ms | Allocations: 13119)


  [1m[36mDoctor Load (1.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAppointment Load (0.1ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."doctor_id" = ?[0m  [["doctor_id", 3]]
  [1m[36mDoctor Load (1.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAppointment Load (0.1ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."doctor_id" = ?[0m  [["doctor_id", 3]]
  [1m[36mDoctor Load (0.6ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mDoctor Update (1.2ms)[0m  [1m[33mUPDATE "doctors" SET "updated_at" = ?, "schedule" = ? WHERE "doctors"."id" = ?[0m  [["updated_at", "2023-10-12 14:08:28.079196"], ["schedule", "\"---\\n- 9:00 AM - 11:00 AM\\n- 1:00 PM - 3:00 PM\\n\""], ["id", 3]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[36mcommit transaction[0m
Started PATCH "/appointments/7" for ::1 at 2023-10-12 16:09:25 +0200
Processing by AppointmentsController#update as */*
  Parameters: {"patient_name"=>"shiq", "appointment_time"=>"3:00", "id"=>"7", "appointment"=>{"patient_name"=>"shiq", "appointment_time"=>"3:00"}}
  [1m[36mAppointment Load (0.3ms)[0m  [1m[34mSELECT "appointments".* FROM "appointments" WHERE "appointments"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:27:in `set_appointment'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mDoctor Load (0.0ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/appointments_controller.rb:6:in `update'
  [1m[36mAppointment Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "appointments" WHERE "appointments"."doctor_id" = ? AND (appointment_time >= '2023-10-12 01:00:00' AND appointment_time <= '2023-10-12 01:59:59.999999') AND "appointments"."id" != ? LIMIT ?[0m  [["doctor_id", 1], ["id", 7], ["LIMIT", 1]]
  â†³ app/models/appointment.rb:11:in `check_overlapping_appointments'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/appointments_controller.rb:6:in `update'
[active_model_serializers] Rendered AppointmentSerializer with ActiveModelSerializers::Adapter::Attributes (0.11ms)
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.3ms)
Completed 200 OK in 11ms (Views: 0.6ms | ActiveRecord: 1.4ms | Allocations: 10195)


Started GET "/posts/new" for ::1 at 2023-10-12 17:22:43 +0200
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/posts/new"):
  
Started GET "/favicon.ico" for ::1 at 2023-10-12 17:22:44 +0200
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/doctos/1" for ::1 at 2023-10-12 17:22:47 +0200
  
ActionController::RoutingError (No route matches [GET] "/doctos/1"):
  
Started GET "/doctors/1" for ::1 at 2023-10-12 17:22:59 +0200
Processing by DoctorsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors" WHERE "doctors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/doctors_controller.rb:11:in `show'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.73ms)
Completed 200 OK in 23ms (Views: 2.8ms | ActiveRecord: 1.5ms | Allocations: 9843)


